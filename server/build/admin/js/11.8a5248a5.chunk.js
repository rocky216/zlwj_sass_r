(this.webpackJsonpzlwj_sass_r=this.webpackJsonpzlwj_sass_r||[]).push([[11],{1259:function(e,t,a){"use strict";a.r(t);var n=a(52),i=a(226),s=a(60),l=a(61),r=a(67),c=a(66),m=a(0),o=a.n(m),u=a(49),p=a(155),d=a(454),b=a(59),y=a(224),h=a(135),f=a(88),S=a(1207),v=a(1220),E=a(210),O=[{title:"\u7cfb\u7edf\u4ee3\u53f7",dataIndex:"temCode"},{title:"\u7cfb\u7edf\u540d\u79f0",dataIndex:"temName"},{title:"\u8bbf\u95eeURL",dataIndex:"temUrl"},{title:"\u7cfb\u7edf\u7ea7\u522b",dataIndex:"temLevel",render:function(e){return E.e[e]}}],g=a(116),k=a(337),j=a(40),I=a.n(j),V=a(123),C=y.a.TextArea,w=h.a.Option,x={current:1},U=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={addVisible:!1,editVisible:!1,detail:{temIcon:"",id:""}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.getSystems({params:x})}},{key:"getCol",value:function(){var e=this;return[].concat(Object(i.a)(O),[{title:"\u64cd\u4f5c",width:150,render:function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{type:"link",onClick:function(){return e.setState({detail:t,editVisible:!0})}},"\u7f16\u8f91"),o.a.createElement(V.b,{to:"/company/".concat(t.id,"/permisser")},o.a.createElement(f.a,{type:"link"},"\u6743\u9650\u5305")))}}])}},{key:"addSubmit",value:function(e){var t=this;this.props.actions.addSystem(Object(n.a)(Object(n.a)({},e),{},{temIcon:this.props.utils.submitFiles(e.temIcon)}),(function(){t.props.utils.OpenNotification("success"),t.props.actions.getSystems({params:x,refresh:!0}),t.setState({addVisible:!1})}))}},{key:"editSubmit",value:function(e){var t=this;this.props.actions.editSystem(Object(n.a)(Object(n.a)({},e),{},{id:this.state.detail.id,temIcon:this.props.utils.submitFiles(e.temIcon)}),(function(){t.props.utils.OpenNotification("success"),t.props.actions.getSystems({params:x,refresh:!0}),t.setState({editVisible:!1})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.spinning,i=t.utils,s=t.systems,l=this.state,r=l.addVisible,c=l.editVisible,m=l.detail;return o.a.createElement(p.a,{spinning:a},o.a.createElement("div",{key:"a"},o.a.createElement(S.a,{size:"small",title:o.a.createElement(f.a,{type:"primary",onClick:function(){return e.setState({addVisible:!0})}},"\u65b0\u589e")},o.a.createElement(v.a,{size:"small",columns:this.getCol(),dataSource:s?i.addIndex(s.list):[],pagination:i.Pagination(s,(function(t){x.current=t,e.props.actions.getSystems({params:x,refresh:!0})}))}))),o.a.createElement(g.a,{title:"\u65b0\u589e\u7cfb\u7edf",spinning:a,visible:r,onCancel:function(){return e.setState({addVisible:!1})},onOk:this.addSubmit.bind(this),data:[{label:"\u7cfb\u7edf\u4ee3\u53f7",name:"temCode",type:y.a,rules:!0},{label:"\u7cfb\u7edf\u540d\u79f0",name:"temName",type:y.a,rules:!0},{label:"\u8bbf\u95eeURL",name:"temUrl",type:y.a,rules:!0},{label:"\u7cfb\u7edf\u7ea7\u522b",name:"temType",type:o.a.createElement(h.a,null,o.a.createElement(w,{value:"GS"},"\u516c\u53f8\u7ea7\u522b"),o.a.createElement(w,{value:"XM"},"\u9879\u76ee\u7ea7\u522b")),rules:!0},{label:"\u56fe\u6807",name:"temIcon",type:o.a.createElement(k.a,null),initialValue:[]},{label:"\u5907\u6ce8",name:"remark",type:C}]}),o.a.createElement(g.a,{title:"\u7f16\u8f91\u7cfb\u7edf",spinning:a,visible:c&&I.a.size(m)>1,onCancel:function(){return e.setState({editVisible:!1})},onOk:this.editSubmit.bind(this),initialValues:Object(n.a)(Object(n.a)({},m),{},{temIcon:i.echoFiles(m.temIcon)}),data:[{label:"\u7cfb\u7edf\u4ee3\u53f7",name:"temCode",type:y.a,rules:!0},{label:"\u7cfb\u7edf\u540d\u79f0",name:"temName",type:y.a,rules:!0},{label:"\u8bbf\u95eeURL",name:"temUrl",type:y.a,rules:!0},{label:"\u7cfb\u7edf\u7ea7\u522b",name:"temType",type:o.a.createElement(h.a,null,o.a.createElement(w,{value:"GS"},"\u516c\u53f8\u7ea7\u522b"),o.a.createElement(w,{value:"XM"},"\u9879\u76ee\u7ea7\u522b")),rules:!0},{label:"\u56fe\u6807",name:"temIcon",type:o.a.createElement(k.a,null)},{label:"\u5907\u6ce8",name:"remark",type:C}]}))}}]),a}(o.a.Component);t.default=Object(u.b)((function(e){return{systems:e.system.systems,spinning:e.system.spinning,utils:e.app.utils}}),(function(e){return{actions:Object(b.b)({getSystems:d.m,addSystem:d.c,editSystem:d.h},e)}}))(U)}}]);
//# sourceMappingURL=11.8a5248a5.chunk.js.map