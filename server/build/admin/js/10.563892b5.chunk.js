(this.webpackJsonpzlwj_sass_r=this.webpackJsonpzlwj_sass_r||[]).push([[10],{1253:function(e,t,a){"use strict";a.r(t);var r=a(56),n=a(224),i=a(59),s=a(60),l=a(67),c=a(66),o=a(0),u=a.n(o),d=a(50),p=a(63),m=a(156),f=a(12),b=a.n(f),y=a(61),h=a(16),v=a(375),E=a(18),O=a(72),g=a.n(O),j=a(41),k=a.n(j),x=function(){var e=Object(h.a)(b.a.mark((function e(t){var a,r,n,i,s,l,c,o,u,d,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.options,r=t.dispatch,n=t.keyName,i=t.obj,s=t.next,l=t.type,c=t.refresh,e.prev=1,o=a.url+JSON.stringify(a.data),(u=g.a.get(o))&&!c){e.next=14;break}return r({type:v.c}),e.next=8,Object(E.e)(a);case 8:d=e.sent,s&&s(d),g.a.put(o,d),r(Object(y.a)({type:v.a},n,d)),e.next=15;break;case 14:i&&k.a.size(i)?(p=k.a.findIndex(u.list,(function(e){return e.id==i.id})),("edit"==l||"add"==l)&&(u.list[p]=k.a.assign(u.list[p],i)),g.a.put(o,u),r(Object(y.a)({type:v.b},n,u))):r(Object(y.a)({type:v.b},n,u));case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0),r({type:v.a});case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),S=function(e,t){return function(){var a=Object(h.a)(b.a.mark((function a(r,n){var i,s;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:v.c}),a.prev=1,i={url:"/zlwj/api/system/sys/sys-resource/removeById",method:"post",data:e},a.next=5,Object(E.e)(i);case 5:s=a.sent,t&&t(s),r({type:v.a}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),console.log(a.t0),r({type:v.a});case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e,t){return a.apply(this,arguments)}}()},w=function(e,t){return function(){var a=Object(h.a)(b.a.mark((function a(r,n){var i,s;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:v.c}),a.prev=1,i={url:"/zlwj/api/system/sys/sys-resource/updateById",method:"post",data:e},a.next=5,Object(E.e)(i);case 5:s=a.sent,t&&t(s),r({type:v.a}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),console.log(a.t0),r({type:v.a});case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e,t){return a.apply(this,arguments)}}()},I=function(e,t){return function(){var a=Object(h.a)(b.a.mark((function a(r,n){var i,s;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:v.c}),a.prev=1,i={url:"/zlwj/api/system/sys/sys-resource/save",method:"post",data:e},a.next=5,Object(E.e)(i);case 5:s=a.sent,t&&t(s),r({type:v.a}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),console.log(a.t0),r({type:v.a});case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e,t){return a.apply(this,arguments)}}()},z=function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a,r){var n,i,s,l,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.params,i=e.obj,s=e.next,l=e.type,c=e.refresh,x({options:{url:"/zlwj/api/system/sys/sys-resource/page",method:"get",data:n},dispatch:a,keyName:"resource",obj:i,next:s,refresh:void 0!==c&&c,type:l});case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},N=a(1250).a.Paragraph,R=[{title:"\u8d44\u6e90key",dataIndex:"resourceKey"},{title:"\u9644\u4ef6\u540d\u79f0",dataIndex:"annexName"},{title:"\u6587\u4ef6\u4e0b\u8f7d\u8def\u5f84",dataIndex:"resourceDownload",render:function(e){return u.a.createElement("div",{style:{width:180},title:e},u.a.createElement(N,{copyable:!0,ellipsis:!0},e))}},{title:"\u6587\u4ef6\u5b58\u50a8\u8def\u5f84",dataIndex:"resourceStorage",render:function(e){return u.a.createElement("div",{style:{width:180},title:e},u.a.createElement(N,{copyable:!0,ellipsis:!0},e))}},{title:"\u6587\u4ef6\u540e\u7f00",dataIndex:"suffix"},{title:"\u6587\u4ef6\u5927\u5c0f",dataIndex:"size"},{title:"\u521b\u5efa\u4fe1\u606f",dataIndex:"buildTime"},{title:"\u66f4\u65b0\u4fe1\u606f",dataIndex:"updateTime"}],U=a(86),V=a(1221),C=a(222),F=a(1204),q=a(1217),L=a(299),H=a(92),K=a(265),T=a(1203),D=a(1201),P={labelCol:{span:4},wrapperCol:{span:19}},A=Object(d.b)((function(e){return{utils:e.app.utils}}))((function(e){var t=e.onCancel,a=e.visible,r=e.title,n=e.utils,i=e.onOk,s=K.a.useForm(),l=Object(H.a)(s,1)[0],c=Object(o.useState)(),d=Object(H.a)(c,2),p=(d[0],d[1]);return u.a.createElement(T.a,{title:r,visible:a,onCancel:t,onOk:function(){return l.submit()}},u.a.createElement(K.a,Object.assign({form:l},P,{onFinish:function(e){console.log(e);var t=k.a.omit(e,"filearr");i(t)}}),u.a.createElement(K.a.Item,{label:"\u8d44\u6e90\u540d\u79f0",name:"annexName",rules:[{required:!0}]},u.a.createElement(C.a,null)),u.a.createElement(K.a.Item,{label:"\u8d44\u6e90KEY",name:"resourceKey",rules:[{required:!0}]},u.a.createElement(C.a,null)),u.a.createElement(K.a.Item,{label:"\u4e0a\u4f20\u9644\u4ef6",name:"filearr",rules:[{required:!0}],valuePropName:"fileList",getValueFromEvent:function(e){if(console.log("Upload event:",e),Array.isArray(e))return e;if("done"==e.file.status){var t=e.file.response,a=t.code,r=t.data,i=t.msg;if(1!=a)return n.OpenNotification("error",i),null;p(r),l.setFieldsValue({resourceId:r.id,resourceDownload:r.dowloadHttpUrl,dowloadHttpUrl:r.dowloadHttpPdfUrl,resourceStorage:r.flieUrl,suffix:r.suffixName,size:r.fileSize}),e.fileList=[e.file]}return e.file&&e.fileList}},u.a.createElement(D.a,{action:"/zlwj/api/resource/file/uploadFile",name:"file",data:{token:n.getToken(),resourceType:"0",linkType:"sysResources",fileSize:10240,isFlag:0},beforeUpload:function(e){return e&&e.size>10485760?(n.OpenNotification("error","\u9644\u4ef6\u4e0d\u80fd\u5927\u4e8e10M"),!1):e}},u.a.createElement(U.a,null,"\u70b9\u51fb\u4e0a\u4f20"))),u.a.createElement(K.a.Item,{label:"\u9644\u4ef6id",name:"resourceId",rules:[{required:!0}]},u.a.createElement(C.a,{disabled:!0})),u.a.createElement(K.a.Item,{label:"\u4e0b\u8f7dURL",name:"resourceDownload"},u.a.createElement(C.a,{disabled:!0})),u.a.createElement(K.a.Item,{label:"\u6c34\u5370URL",name:"dowloadHttpUrl"},u.a.createElement(C.a,{disabled:!0})),u.a.createElement(K.a.Item,{label:"\u5b58\u50a8\u8def\u5f84",name:"resourceStorage"},u.a.createElement(C.a,{disabled:!0})),u.a.createElement(K.a.Item,{label:"\u6587\u4ef6\u540e\u7f00",name:"suffix",rules:[{required:!0}]},u.a.createElement(C.a,{disabled:!0})),u.a.createElement(K.a.Item,{label:"\u6587\u4ef6\u5927\u5c0f",name:"size",rules:[{required:!0}]},u.a.createElement(C.a,{disabled:!0}))))})),_={labelCol:{span:4},wrapperCol:{span:19}},J=Object(d.b)((function(e){return{utils:e.app.utils}}))((function(e){var t=e.onCancel,a=e.visible,n=e.title,i=e.utils,s=e.onOk,l=e.detail,c=K.a.useForm(),d=Object(H.a)(c,1)[0],p=Object(o.useState)(),m=Object(H.a)(p,2),f=(m[0],m[1]);return u.a.createElement(T.a,{title:n,visible:a,onCancel:t,onOk:function(){return d.submit()}},u.a.createElement(K.a,Object.assign({form:d},_,{onFinish:function(e){console.log(e);var t=k.a.omit(e,"filearr");s(t)},initialValues:Object(r.a)({},l)}),u.a.createElement(K.a.Item,{label:"\u8d44\u6e90\u540d\u79f0",name:"annexName",rules:[{required:!0}]},u.a.createElement(C.a,null)),u.a.createElement(K.a.Item,{label:"\u8d44\u6e90KEY",name:"resourceKey",rules:[{required:!0}]},u.a.createElement(C.a,null)),u.a.createElement(K.a.Item,{label:"\u4e0a\u4f20\u9644\u4ef6",name:"filearr",valuePropName:"fileList",getValueFromEvent:function(e){if(console.log("Upload event:",e),Array.isArray(e))return e;if("done"==e.file.status){var t=e.file.response,a=t.code,r=t.data,n=t.msg;if(1!=a)return i.OpenNotification("error",n),null;f(r),d.setFieldsValue({resourceId:r.id,resourceDownload:r.dowloadHttpUrl,dowloadHttpUrl:r.dowloadHttpPdfUrl,resourceStorage:r.flieUrl,suffix:r.suffixName,size:r.fileSize}),e.fileList=[e.file]}return e.file&&e.fileList}},u.a.createElement(D.a,{action:"/zlwj/api/resource/file/uploadFile",name:"file",data:{token:i.getToken(),resourceType:"0",linkType:"sysResources",fileSize:10240,isFlag:0},beforeUpload:function(e){return e&&e.size>10485760?(i.OpenNotification("error","\u9644\u4ef6\u4e0d\u80fd\u5927\u4e8e10M"),!1):e}},u.a.createElement(U.a,null,"\u70b9\u51fb\u4e0a\u4f20"))),u.a.createElement(K.a.Item,{label:"\u9644\u4ef6id",name:"resourceId",rules:[{required:!0}]},u.a.createElement(C.a,{disabled:!0})),u.a.createElement(K.a.Item,{label:"\u4e0b\u8f7dURL",name:"resourceDownload"},u.a.createElement(C.a,{disabled:!0})),u.a.createElement(K.a.Item,{label:"\u6c34\u5370URL",name:"dowloadHttpUrl"},u.a.createElement(C.a,{disabled:!0})),u.a.createElement(K.a.Item,{label:"\u5b58\u50a8\u8def\u5f84",name:"resourceStorage"},u.a.createElement(C.a,{disabled:!0})),u.a.createElement(K.a.Item,{label:"\u6587\u4ef6\u540e\u7f00",name:"suffix",rules:[{required:!0}]},u.a.createElement(C.a,{disabled:!0})),u.a.createElement(K.a.Item,{label:"\u6587\u4ef6\u5927\u5c0f",name:"size",rules:[{required:!0}]},u.a.createElement(C.a,{disabled:!0}))))})),M={current:1,annexName:"",resourceKey:""},B={current:1,annexName:"",resourceKey:""},Y=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={addVisible:!1,editVisible:!1,detail:{id:""}},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.getSysResource({params:M})}},{key:"getCol",value:function(){var e=this;return[].concat(Object(n.a)(R),[{title:"\u64cd\u4f5c",render:function(t){return u.a.createElement(u.a.Fragment,null,u.a.createElement(U.a,{type:"link",onClick:function(){return e.setState({editVisible:!0,detail:t})}},"\u8d44\u6e90\u8be6\u60c5"),u.a.createElement(V.a,{title:"\u662f\u5426\u5220\u9664\uff1f",onConfirm:e.deleteSubmit.bind(e,t)},u.a.createElement(U.a,{type:"link"},"\u5220\u9664")))}}])}},{key:"submitSearch",value:function(e){e&&(M=Object(r.a)(Object(r.a)({},M),e)),this.props.actions.getSysResource({params:M,refresh:!0})}},{key:"deleteSubmit",value:function(e){var t=this;this.props.actions.deleteSysResource({id:e.id},(function(){t.props.utils.OpenNotification("success"),t.props.actions.getSysResource({params:M,refresh:!0})}))}},{key:"addSubmit",value:function(e){var t=this;this.props.actions.addSysResource(e,(function(){t.props.utils.OpenNotification("success"),t.props.actions.getSysResource({params:M,refresh:!0}),t.setState({addVisible:!1})}))}},{key:"editSubmit",value:function(e){var t=this;this.props.actions.editSysResource(Object(r.a)(Object(r.a)({},e),{},{id:this.state.detail.id}),(function(){t.props.utils.OpenNotification("success"),t.props.actions.getSysResource({params:M,refresh:!0}),t.setState({editVisible:!1})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.spinning,r=t.utils,n=t.resource,i=this.state,s=i.addVisible,l=i.editVisible,c=i.detail;return u.a.createElement(m.a,{spinning:a},u.a.createElement("div",{key:"a"},u.a.createElement(L.a,{before:u.a.createElement(U.a,{type:"primary",onClick:function(){return e.setState({addVisible:!0})}},"\u65b0\u589e"),initialValues:M,resetValues:B,handleSearch:this.submitSearch.bind(this),data:[{label:"\u8d44\u6e90\u540d\u79f0",name:"annexName",type:C.a},{label:"\u8d44\u6e90key",name:"resourceKey",type:C.a}]})),u.a.createElement("div",{key:"b"},u.a.createElement(F.a,{size:"small"},u.a.createElement(q.a,{size:"small",columns:this.getCol(),dataSource:n?r.addIndex(n.list):[],pagination:r.Pagination(n,(function(t){M.current=t,e.props.actions.getSysResource({params:M})}))}))),u.a.createElement(A,{title:"\u65b0\u589e\u8d44\u6e90",visible:s,onCancel:function(){return e.setState({addVisible:!1})},onOk:this.addSubmit.bind(this)}),u.a.createElement(J,{title:"\u7f16\u8f91\u8d44\u6e90",visible:l,detail:c,onCancel:function(){return e.setState({editVisible:!1})},onOk:this.editSubmit.bind(this)}))}}]),a}(u.a.Component);t.default=Object(d.b)((function(e){return{resource:e.other.resource,utils:e.app.utils,spinning:e.other.spinning}}),(function(e){return{actions:Object(p.b)({getSysResource:z,addSysResource:I,editSysResource:w,deleteSysResource:S},e)}}))(Y)}}]);
//# sourceMappingURL=10.563892b5.chunk.js.map