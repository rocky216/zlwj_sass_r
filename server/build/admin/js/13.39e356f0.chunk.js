(this.webpackJsonpzlwj_sass_r=this.webpackJsonpzlwj_sass_r||[]).push([[13],{1258:function(e,t,a){"use strict";a.r(t);var n=a(52),s=a(226),l=a(60),r=a(61),i=a(67),c=a(66),u=a(0),o=a.n(u),m=a(49),p=a(123),d=a(135),h=a(224),b=a(388),y=a(88),f=a(1207),v=a(266),E=a(1220),g=a(455),k=a(155),j=a(59),I=a(453),O=a(116),U=a(1222),N=a(125),S=Object(m.b)((function(e){return{companyhe:e.app.companyhe}}),(function(e){return{actions:Object(j.b)({getCompanyHe:N.a},e)}}))((function(e){var t=e.onChange,a=e.value,n=void 0===a?[]:a,s=e.actions,l=e.companyhe;Object(u.useEffect)((function(){s.getCompanyHe({})}),[]);return o.a.createElement(U.a,{value:n,options:l||[],onChange:function(e){t&&t(e)},fieldNames:{label:"name",value:"id",children:"items"},placeholder:"\u8bf7\u9009\u62e9\u516c\u53f8/\u5c0f\u533a"})})),C=d.a.Option,L={current:1,userName:"",phone:"",status:"",userNick:"",account:"",companyId:"",heId:"",temId:""},V=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).formRef=o.a.createRef(),e.state={addVisible:!1,currentKey:"authList",filterSelect:[{label:"\u6743\u9650\u67e5\u8be2",value:"authList"},{label:"\u7528\u6237\u67e5\u8be2",value:"userList"},{label:"\u8d26\u6237\u67e5\u8be2",value:"accountList"}],authList:[{label:"\u516c\u53f8\u9879\u533a\u6743\u9650",name:"auth",type:o.a.createElement(S,null),initialValue:L.companyId?[L.companyId,L.heId]:[]}],userList:[{label:"\u59d3\u540d",name:"userName",type:o.a.createElement(h.a,null)},{label:"\u624b\u673a\u53f7",name:"phone",type:o.a.createElement(b.a,{style:{width:130}})},{label:"\u6635\u79f0",name:"userNick",type:o.a.createElement(h.a,null)}],accountList:[{label:"\u552f\u4e00ID",name:"temId",type:o.a.createElement(h.a,null)},{label:"\u8d26\u53f7",name:"account",type:o.a.createElement(h.a,null)},{label:"\u72b6\u6001",name:"status",type:o.a.createElement(d.a,null,o.a.createElement(C,{value:""},"\u5168\u90e8"),o.a.createElement(C,{value:1},"\u542f\u7528"),o.a.createElement(C,{value:0},"\u7981\u7528")),initialValue:""}]},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.getUsers({params:L,refresh:!0})}},{key:"handleSearch",value:function(e){var t=this.state.currentKey,a=e.auth,n=e.userName,s=e.phone,l=e.userNick,r=e.status,i=e.account,c=e.temId;return"authList"==t?(L=Object.assign(L,{companyId:a.length?a[0]:"",heId:a.length?a[1]:""}),console.log(L,"params"),void this.props.actions.getUsers({params:L,refresh:!0})):"userList"==t?(L=Object.assign(L,{userName:n,phone:s,userNick:l}),void this.props.actions.getUsers({params:L,refresh:!0})):"accountList"==t?(L=Object.assign(L,{status:r,account:i,temId:c}),void this.props.actions.getUsers({params:L,refresh:!0})):void 0}},{key:"statusUser",value:function(e){var t=this;this.props.actions.statusSysUser({id:e.id},(function(e){t.props.utils.OpenNotification("success"),t.props.actions.getUsers({params:L,obj:e,type:"edit"})}))}},{key:"getCol",value:function(){var e=this;return[].concat(Object(s.a)(g.b),[{title:"\u72b6\u6001",dataIndex:"status",render:function(t,a){return o.a.createElement(d.a,{size:"small",value:t,onChange:e.statusUser.bind(e,a)},o.a.createElement(C,{value:1},"\u542f\u7528"),o.a.createElement(C,{value:0},"\u7981\u7528"))}},{title:"\u64cd\u4f5c",width:100,render:function(e){return o.a.createElement(p.b,{to:"/users/".concat(e.id,"/detail/").concat(e.temId,"/base")},o.a.createElement(y.a,{type:"link"},"\u7528\u6237\u8be6\u60c5"))}}])}},{key:"addUser",value:function(e){var t=this;this.props.actions.addSysUser(Object(n.a)({},e),(function(){t.props.actions.getUsers({params:L,refresh:!0}),t.props.utils.OpenNotification("success"),t.setState({addVisible:!1})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.spinning,n=t.utils,s=t.users,l=this.state,r=l.filterSelect,i=l.currentKey,c=l.addVisible;return o.a.createElement(k.a,{spinning:a},o.a.createElement(O.a,{title:"\u65b0\u589e\u7528\u6237",spinning:!1,visible:c,onCancel:function(){return e.setState({addVisible:!1})},onOk:this.addUser.bind(this),data:[{label:"\u624b\u673a\u53f7",name:"phoneAccount",type:b.a,rules:!0},{label:"\u59d3\u540d",name:"userName",type:h.a},{label:"\u6635\u79f0",name:"userNick",type:h.a},{label:"\u6027\u522b",name:"gender",type:o.a.createElement(d.a,null,o.a.createElement(C,{value:1},"\u7537"),o.a.createElement(C,{value:2},"\u5973"),o.a.createElement(C,{value:3},"\u672a\u77e5"))}]}),o.a.createElement("div",{key:"a"},o.a.createElement(f.a,{size:"small"},o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},o.a.createElement(y.a,{type:"primary",onClick:function(){return e.setState({addVisible:!0})}},"\u65b0\u589e\u7528\u6237"),o.a.createElement("div",null,o.a.createElement(v.a,{className:"flexend",layout:"inline",ref:this.formRef,onFinish:this.handleSearch.bind(this)},o.a.createElement(v.a.Item,{label:"\u641c\u7d22\u7c7b\u578b",name:"type",initialValue:i},o.a.createElement(d.a,{onChange:function(t){e.setState({currentKey:t})}},r.map((function(e){return o.a.createElement(C,{key:e.value,value:e.value},e.label)})))),this.state[i].map((function(e,t){return o.a.createElement(v.a.Item,{key:t,name:e.name,label:e.label,initialValue:e.initialValue},e.type)})),o.a.createElement(v.a.Item,null,o.a.createElement(y.a,{ghost:!0,type:"primary",htmlType:"submit"},"\u641c\u7d22"))))))),o.a.createElement("div",{key:"b"},o.a.createElement(f.a,{size:"small"},o.a.createElement(E.a,{size:"small",columns:this.getCol(),dataSource:s?n.addIndex(s.list):[],pagination:n.Pagination(s,(function(t){L.current=t,e.props.actions.getUsers({params:L,refresh:!0})}))}))))}}]),a}(o.a.Component);t.default=Object(m.b)((function(e){return{users:e.user.users,spinning:e.user.spinning,utils:e.app.utils}}),(function(e){return{actions:Object(j.b)({getUsers:I.l,addSysUser:I.a,statusSysUser:I.m},e)}}))(V)}}]);
//# sourceMappingURL=13.39e356f0.chunk.js.map