{"version":3,"sources":["admin/actions/otherAction.ts","admin/views/resource/columns/index.tsx","public/components/Modular/getnode.tsx","public/components/Modular/AddModular.tsx","public/components/Modular/SearchModular.tsx","public/components/Element/StatusElement.tsx","public/components/Element/UploadElement.tsx","admin/views/resource/watermark/index.tsx"],"names":["ACTION","deleteLogoLink","params","next","dispatch","getState","a","options","url","method","data","stateApi","statusLogoLink","editLogoLink","addLogoLink","getLogoLink","opt","storetApi","statusResType","deleteResType","editResType","addResType","getResTypeList","optionList","keyName","obj","type","refresh","key","JSON","stringify","isCache","MC","get","OTHER_LOADING_START","fetch","put","OTHER_LOADING_END","_","size","index","findIndex","list","o","id","assign","OTHER_LOADING_NOT","console","log","deleteSysResource","editSysResource","addSysResource","getSystemLink","getSysResource","Paragraph","Typography","logoLinkColumns","title","dataIndex","restypeColumns","resourceColumns","render","item","style","width","copyable","ellipsis","TextArea","Input","Option","Select","RangePicker","DatePicker","getNode","disabled","selectList","map","elem","value","label","notAll","layout","labelCol","span","wrapperCol","AddModular","visible","onOk","onCancel","initialValues","spinning","Form","useForm","form","useState","modalVisible","setModalVisible","useEffect","setFieldsValue","resetFields","handleRules","rules","required","message","destroyOnClose","submit","confirmLoading","afterClose","name","onFinish","values","Item","initialValue","valuePropName","SearchModular","before","submitSearch","resetValues","bordered","className","marginRight","marginBottom","ghost","htmlType","icon","onClick","StatusElement","onChange","v","connect","state","utils","app","more","loading","setLoading","uploadButton","LoadingOutlined","PlusOutlined","marginTop","initialData","token","getToken","isFlag","resourceType","action","listType","fileList","e","Array","isArray","file","status","response","code","msg","OpenNotification","length","imgArr","arr","newArr","each","downloadUrl","fileName","push","uid","handleData","showUploadList","onRemove","filter","beforeUpload","UploadOutlined","current","logoName","resetParams","Watermark","addVisible","editVisible","detail","logoRealPath","this","props","actions","setState","onConfirm","logolink","JCard","columns","getCol","dataSource","addIndex","pagination","Pagination","page","submitFiles","fileType","echoFiles","res","React","Component","other","bindActionCreators"],"mappings":"4sBAMMA,EAAS,QAIFC,EAAiB,SAACC,EAAYC,GACzC,8CAAO,WAAOC,EAAmBC,GAA1B,eAAAC,EAAA,sDACCC,EAAc,CAClBC,IAAK,0CACLC,OAAQ,OACRC,KAAMR,GAERS,YAASJ,EAASH,EAAUJ,EAAQG,GAN/B,2CAAP,yDAUWS,EAAiB,SAACV,EAAYC,GACzC,8CAAO,WAAOC,EAAmBC,GAA1B,eAAAC,EAAA,sDACCC,EAAc,CAClBC,IAAK,sCACLC,OAAQ,OACRC,KAAMR,GAERS,YAASJ,EAASH,EAAUJ,EAAQG,GAN/B,2CAAP,yDAUWU,EAAe,SAACX,EAAYC,GACvC,8CAAO,WAAOC,EAAmBC,GAA1B,eAAAC,EAAA,sDACCC,EAAc,CAClBC,IAAK,0CACLC,OAAQ,OACRC,KAAMR,GAERS,YAASJ,EAASH,EAAUJ,EAAQG,GAN/B,2CAAP,yDAUWW,EAAc,SAACZ,EAAYC,GACtC,8CAAO,WAAOC,EAAmBC,GAA1B,eAAAC,EAAA,sDACCC,EAAc,CAClBC,IAAK,oCACLC,OAAQ,OACRC,KAAMR,GAERS,YAASJ,EAASH,EAAUJ,EAAQG,GAN/B,2CAAP,yDAUWY,EAAc,SAACb,EAAYc,GACtC,8CAAO,WAAOZ,EAAmBC,GAA1B,eAAAC,EAAA,sDACCC,EAAc,CAClBC,IAAK,oCACLC,OAAQ,MACRC,KAAMR,GAGRe,YAAUV,EAAS,WAAYH,EAAUJ,EAAQgB,GAP5C,2CAAP,yDAWWE,EAAgB,SAAChB,EAAYC,GACxC,8CAAO,WAAOC,EAAmBC,GAA1B,eAAAC,EAAA,sDACCC,EAAc,CAClBC,IAAK,sCACLC,OAAQ,OACRC,KAAMR,GAERS,YAASJ,EAASH,EAAUJ,EAAQG,GAN/B,2CAAP,yDAWWgB,EAAgB,SAACjB,EAAYC,GACxC,8CAAO,WAAOC,EAAmBC,GAA1B,eAAAC,EAAA,sDACCC,EAAc,CAClBC,IAAK,0CACLC,OAAQ,OACRC,KAAMR,GAERS,YAASJ,EAASH,EAAUJ,EAAQG,GAN/B,2CAAP,yDAUWiB,EAAc,SAAClB,EAAYC,GACtC,8CAAO,WAAOC,EAAmBC,GAA1B,eAAAC,EAAA,sDACCC,EAAc,CAClBC,IAAK,0CACLC,OAAQ,OACRC,KAAMR,GAERS,YAASJ,EAASH,EAAUJ,EAAQG,GAN/B,2CAAP,yDAUWkB,EAAa,SAACnB,EAAYC,GACrC,8CAAO,WAAOC,EAAmBC,GAA1B,eAAAC,EAAA,sDACCC,EAAc,CAClBC,IAAK,oCACLC,OAAQ,OACRC,KAAMR,GAERS,YAASJ,EAASH,EAAUJ,EAAQG,GAN/B,2CAAP,yDAUWmB,EAAiB,SAACpB,EAAYc,GACzC,8CAAO,WAAOZ,EAAmBC,GAA1B,eAAAC,EAAA,sDACCC,EAAc,CAClBC,IAAK,oCACLC,OAAQ,MACRC,KAAMR,GAGRe,YAAUV,EAAS,UAAWH,EAAUJ,EAAQgB,GAP3C,2CAAP,yDAmCIO,EAAU,uCAAG,WAAOP,GAAP,mCAAAV,EAAA,yDACRC,EAAuDS,EAAvDT,QAAQH,EAA+CY,EAA/CZ,SAAUoB,EAAqCR,EAArCQ,QAASC,EAA4BT,EAA5BS,IAAKtB,EAAuBa,EAAvBb,KAAMuB,EAAiBV,EAAjBU,KAAMC,EAAWX,EAAXW,QADpC,SAGTC,EAAMrB,EAAQC,IAAIqB,KAAKC,UAAUvB,EAAQG,OACzCqB,EAAUC,IAAGC,IAAIL,MAERD,EANA,wBAObvB,EAAS,CACPsB,KAAMQ,MARK,SAUQC,YAAM5B,GAVd,OAUTG,EAVS,OAWVP,GAAKA,EAAKO,GACbsB,IAAGI,IAAIR,EAAKlB,GACZN,EAAS,aACPsB,KAAMW,KACLb,EAAUd,IAfA,wBAkBVe,GAAOa,IAAEC,KAAKd,IACXe,EAAQF,IAAEG,UAAUV,EAAQW,MAAM,SAACC,GAAD,OAASA,EAAEC,IAAInB,EAAImB,OAChD,QAANlB,GAEY,OAANA,KADPK,EAAQW,KAAKF,GAASF,IAAEO,OAAOd,EAAQW,KAAKF,GAAQf,IAKtDO,IAAGI,IAAIR,EAAKG,GACZ3B,EAAS,aACPsB,KAAMoB,KACLtB,EAAUO,KAGb3B,EAAS,aACPsB,KAAMoB,KACLtB,EAAUO,IAlCF,0DAyCfgB,QAAQC,IAAR,MACA5C,EAAS,CAACsB,KAAMW,MA1CD,0DAAH,sDAgDHY,EAAoB,SAAC/C,EAAYC,GAC5C,8CAAO,WAAOC,EAAmBC,GAA1B,iBAAAC,EAAA,6DACLF,EAAS,CACPsB,KAAMQ,MAFH,SAKG3B,EAAc,CAClBC,IAAK,+CACLC,OAAQ,OACRC,KAAMR,GARL,SAUkBiC,YAAM5B,GAVxB,OAUCG,EAVD,OAWAP,GAAKA,EAAKO,GACbN,EAAS,CACPsB,KAAMW,MAbL,kDAiBHU,QAAQC,IAAR,MACA5C,EAAS,CAACsB,KAAMW,MAlBb,0DAAP,yDAuBWa,EAAkB,SAAChD,EAAYC,GAC1C,8CAAO,WAAOC,EAAmBC,GAA1B,iBAAAC,EAAA,6DACLF,EAAS,CACPsB,KAAMQ,MAFH,SAKG3B,EAAc,CAClBC,IAAK,+CACLC,OAAQ,OACRC,KAAMR,GARL,SAUkBiC,YAAM5B,GAVxB,OAUCG,EAVD,OAWAP,GAAKA,EAAKO,GACbN,EAAS,CACPsB,KAAMW,MAbL,kDAiBHU,QAAQC,IAAR,MACA5C,EAAS,CAACsB,KAAMW,MAlBb,0DAAP,yDAyBWc,EAAiB,SAACjD,EAAYC,GACzC,8CAAO,WAAOC,EAAmBC,GAA1B,iBAAAC,EAAA,6DACLF,EAAS,CACPsB,KAAMQ,MAFH,SAKG3B,EAAc,CAClBC,IAAK,yCACLC,OAAQ,OACRC,KAAMR,GARL,SAUkBiC,YAAM5B,GAVxB,OAUCG,EAVD,OAWAP,GAAKA,EAAKO,GACbN,EAAS,CACPsB,KAAMW,MAbL,kDAiBHU,QAAQC,IAAR,MACA5C,EAAS,CAACsB,KAAMW,MAlBb,0DAAP,yDAuBWe,EAAgB,SAACpC,GAC5B,8CAAO,WAAOZ,EAAmBC,GAA1B,uBAAAC,EAAA,sDAEEJ,EAA0Cc,EAA1Cd,OAAQuB,EAAkCT,EAAlCS,IAAKtB,EAA6Ba,EAA7Bb,KAAMuB,EAAuBV,EAAvBU,KAFrB,EAE4CV,EAAjBW,QAMhCJ,EAAW,CACThB,QANkB,CAClBC,IAAK,gDACLC,OAAQ,MACRC,KAAMR,GAINE,WACAoB,QAAS,aAAcC,MAAKtB,OAAMwB,aAX/B,SAWwCD,SAXxC,2CAAP,yDAeW2B,EAAiB,SAACrC,GAC7B,8CAAO,WAAOZ,EAAmBC,GAA1B,uBAAAC,EAAA,sDAEEJ,EAA0Cc,EAA1Cd,OAAQuB,EAAkCT,EAAlCS,IAAKtB,EAA6Ba,EAA7Bb,KAAMuB,EAAuBV,EAAvBU,KAFrB,EAE4CV,EAAjBW,QAMhCJ,EAAW,CACThB,QANkB,CAClBC,IAAK,yCACLC,OAAQ,MACRC,KAAMR,GAINE,WACAoB,QAAS,WAAYC,MAAKtB,OAAMwB,aAX7B,SAWsCD,SAXtC,2CAAP,0D,kCC9RF,0HAGQ4B,EAHR,QAGsBC,EAAdD,UAGKE,EAAkB,CAC7B,CACEC,MAAO,mBACPC,UAAW,YAEb,CACED,MAAO,WACPC,UAAW,WAEb,CACED,MAAO,2BACPC,UAAW,aAEb,CACED,MAAO,2BACPC,UAAW,eAIFC,EAAiB,CAC5B,CACEF,MAAO,uCACPC,UAAW,YAEb,CACED,MAAO,uCACPC,UAAW,YAEb,CACED,MAAO,6CACPC,UAAW,gBAEb,CACED,MAAO,2BACPC,UAAW,YAEb,CACED,MAAO,uCACPC,UAAW,YAEb,CACED,MAAO,6CACPC,UAAW,qBAEb,CACED,MAAO,2BACPC,UAAW,aAEb,CACED,MAAO,2BACPC,UAAW,eAIFE,EAAkB,CAC7B,CACEH,MAAO,kBACPC,UAAW,eAEb,CACED,MAAO,2BACPC,UAAW,aAEb,CACED,MAAO,uCACPC,UAAW,mBACXG,OAAO,SAACC,GAAD,OACL,yBAAKC,MAAO,CAACC,MAAO,KAAMP,MAAOK,GAC/B,kBAACR,EAAD,CAAWW,UAAQ,EAACC,UAAQ,GAAGJ,MAIrC,CACEL,MAAO,uCACPC,UAAW,kBACXG,OAAO,SAACC,GAAD,OACL,yBAAKC,MAAO,CAACC,MAAO,KAAMP,MAAOK,GAC/B,kBAACR,EAAD,CAAWW,UAAQ,EAACC,UAAQ,GAAGJ,MAIrC,CACEL,MAAO,2BACPC,UAAW,UAEb,CACED,MAAO,2BACPC,UAAW,QAEb,CACED,MAAO,2BACPC,UAAW,aAEb,CACED,MAAO,2BACPC,UAAW,gB,kCCrGf,0FAEOS,EAAYC,IAAZD,SACAE,EAAUC,IAAVD,OACAE,EAAeC,IAAfD,YAmBME,EAAU,SAACX,GAAiB,IAAD,EACtC,OAAOA,EAAKpC,MACV,IAAK,QACH,OAAO,kBAAC,IAAD,CAAOgD,SAAUZ,EAAKY,WAC/B,IAAK,WACH,OAAO,kBAACP,EAAD,CAAUO,SAAUZ,EAAKY,WAClC,IAAK,cACH,OAAO,kBAAC,IAAD,CAAaX,MAAO,CAACC,MAAO,QAASU,SAAUZ,EAAKY,WAC7D,IAAK,aACH,OAAO,kBAAC,IAAD,CAAYX,MAAO,CAACC,MAAO,QAASU,SAAUZ,EAAKY,WAC5D,IAAK,cACH,OAAO,kBAACH,EAAD,CAAaR,MAAO,CAACC,MAAO,QAASU,SAAUZ,EAAKY,WAC7D,IAAK,SACH,OACE,kBAAC,IAAD,CAAQA,SAAUZ,EAAKY,UAAvB,UACGZ,EAAKa,kBADR,aACG,EAAiBC,KAAI,SAAAC,GAAI,OACxB,kBAACR,EAAD,CAAQzC,IAAKiD,EAAKjC,GAAIkC,MAAOD,EAAKjC,IAAMiC,EAAKE,WAIrD,IAAK,SACH,OACE,kBAAC,IAAD,CAAQL,SAAUZ,EAAKY,UACpBZ,EAAKkB,OAAO,KAAK,kBAACX,EAAD,CAAQS,MAAM,IAAd,gBAClB,kBAACT,EAAD,CAAQS,MAAO,GAAf,gBACA,kBAACT,EAAD,CAAQS,MAAO,GAAf,iBAKR,OAAOhB,EAAKpC,O,2FC7BRuD,EAAS,CACbC,SAAU,CAAEC,KAAM,GAClBC,WAAY,CAAED,KAAM,KAgFPE,IA7EoB,SAAC,GAS/B,IARHC,EAQE,EARFA,QACAtB,EAOE,EAPFA,MACAuB,EAME,EANFA,KACAC,EAKE,EALFA,SACA/B,EAIE,EAJFA,MACA/C,EAGE,EAHFA,KACA+E,EAEE,EAFFA,cACAC,EACE,EADFA,SACE,EACaC,IAAKC,UAAbC,EADL,sBAEsCC,oBAAS,GAF/C,mBAEKC,EAFL,KAEmBC,EAFnB,KAIFC,qBAAU,WACLX,IACDU,GAAgB,GACbP,EACDI,EAAKK,eAAeT,GAEpBI,EAAKM,iBAKR,CAACb,IAEJ,IAAMc,EAAc,SAACtC,GACnB,MAAyB,mBAAfA,EAAKuC,MACN,CAAC,CAACC,UAAU,EAAMC,QAAQ,GAAD,OAAKzC,EAAKiB,OAAS,GAAnB,oCACH,kBAAfjB,EAAKuC,MACZvC,EAAKuC,MAEP,IAGT,OACGf,GAAYS,EACb,kBAAC,IAAD,CACEtC,MAAOA,GAAS,KAChB6B,QAASA,EACTtB,MAAOA,GAAS,IAChBwB,SAAU,WACRK,EAAKM,cACLX,KAEFgB,gBAAc,EACdjB,KAAM,kBAAIM,EAAKY,UACfC,eAAgBhB,EAChBiB,WAAY,WACVX,GAAgB,KAGlB,kBAAC,IAAD,eACEY,KAAK,cACD3B,EAFN,CAGEY,KAAMA,EAAMgB,SAAU,SAACC,GAAD,OAAUvB,EAAKuB,IAASrB,cAAeA,IAC5D/E,EAAKkE,KAAI,SAACd,EAAMtB,GAAP,OACR,kBAAC,IAAKuE,KAAN,CACEnF,IAAKY,EACLuC,MAAOjB,EAAKiB,MACZ6B,KAAM9C,EAAK8C,KACXI,aAAclD,EAAKkD,aACnBX,MAAOD,EAAYtC,GACnBsB,WAAYtB,EAAKsB,WACjBF,SAAUpB,EAAKoB,SACf+B,cAAenD,EAAKmD,eAEnBxC,YAAQX,SA/BS,O,+HCefoD,IA9DuB,SAAC,GAQlC,IAPHC,EAOE,EAPFA,OACAzG,EAME,EANFA,KACA0G,EAKE,EALFA,aACA3B,EAIE,EAJFA,cACA4B,EAGE,EAHFA,YAGE,IAFFpC,cAEE,MAFK,SAEL,EADFqC,EACE,EADFA,SACE,EACa3B,IAAKC,UAAbC,EADL,oBAQIO,EAAc,SAACtC,GACnB,MAAyB,mBAAfA,EAAKuC,MACN,CAAC,CAACC,UAAU,EAAMC,QAAQ,GAAD,OAAKzC,EAAKiB,OAAO,GAAjB,oCACH,kBAAfjB,EAAKuC,MACZvC,EAAKuC,MAEP,IAGT,OACE,kBAAC,IAAD,CAAM9D,KAAK,QAAQ+E,SAAUA,GAC3B,yBAAKC,UAAmB,UAARtC,EAAiB,cAAc,IAC7C,yBAAKlB,MAAe,UAARkB,EAAiB,CAACuC,YAAY,IAAI,CAACC,aAAc,KAC1DN,GAEH,6BACE,kBAAC,IAAD,CAAMtB,KAAMA,EACVZ,OAAQA,EACR4B,SAAU,SAACC,GAAD,OAAUM,EAAa,eAAIN,KACrCrB,cAAeA,GAEd/E,EAAKkE,KAAI,SAACd,EAAMtB,GAAP,OACR,kBAAC,IAAKuE,KAAN,CACEnF,IAAKY,EACLuC,MAAOjB,EAAKiB,OAAO,KACnB6B,KAAM9C,EAAK8C,KACXI,aAAclD,EAAKkD,aACnBC,cAAenD,EAAKmD,eAAiB,QACrCZ,MAAOD,EAAYtC,IAElBW,YAAQX,OAGb,kBAAC,IAAKiD,KAAN,KACE,kBAAC,IAAD,CAAQrF,KAAK,UAAUgG,OAAK,EAACC,SAAS,SAASC,KAAM,kBAAC,IAAD,OAArD,gBACCP,EACD,kBAAC,IAAD,CAAQE,UAAU,QAAQM,QAzClB,WAClBhC,EAAKK,eAAemB,GACpBD,KAuC0DQ,KAAM,kBAAC,IAAD,OAAtD,gBAAuF,Y,kCCtErG,6BAIOvD,EAAUC,IAAVD,OAwBQyD,IAdwB,SAAC,GAAmC,IAAlChD,EAAiC,EAAjCA,MAAOiD,EAA0B,EAA1BA,SAAU/C,EAAgB,EAAhBA,OAAQzC,EAAQ,EAARA,KAChE,OACE,kBAAC,IAAD,CAAQA,KAAMA,EAAMuC,MAAOA,EAAOiD,SAAU,SAACC,GACxCD,GACDA,EAASC,KAGVhD,EAAO,KAAK,kBAACX,EAAD,CAAQS,MAAM,IAAd,gBACb,kBAACT,EAAD,CAAQS,MAAO,GAAf,gBACA,kBAACT,EAAD,CAAQS,MAAO,GAAf,mB,2QCgHSmD,eANO,SAACC,GACrB,MAAO,CACLC,MAAMD,EAAME,IAAID,SAILF,EAvGuB,SAAC,GAQlC,IAAD,IAPFvH,YAOE,MAPG,GAOH,EANFyH,EAME,EANFA,MAME,IALFzG,YAKE,MALG,QAKH,EAJFqG,EAIE,EAJFA,SACAjD,EAGE,EAHFA,MAGE,IAFFuD,YAEE,SADF3D,EACE,EADFA,SACE,EAC4BoB,oBAAS,GADrC,mBACKwC,EADL,KACcC,EADd,KAqDIC,EACJ,6BACGF,EAAQ,kBAACG,EAAA,EAAD,MAAmB,kBAACC,EAAA,EAAD,MAC5B,yBAAK3E,MAAO,CAAE4E,UAAW,IAAzB,6BAGEC,EAAc,CAClBC,MAAOV,EAAMW,WACbC,OAAQ,EACRC,aAAc,KAGhB,OACE,kBAAC,IAAD,CACAtE,SAAUA,EACVuE,OAAO,qCACPC,SAAgB,SAANxH,EAAc,eAAe,OACvCkF,KAAK,OACLuC,SAAWrE,GAAS,GACpBiD,SAvDmB,SAACqB,GAEpB,GADAb,GAAW,GACPc,MAAMC,QAAQF,GAChB,OAAOA,EAET,GAAoB,QAAjBA,EAAEG,KAAKC,OAAiB,CAAC,IAAD,EACLJ,EAAEG,KAAKE,SAApBC,EADkB,EAClBA,KAAMC,EADY,EACZA,IACb,GAAS,GAAND,EAED,YADAvB,EAAMyB,iBAAiB,QAASD,GAIpC,GAAI5B,EAAS,EACPM,GAAQe,EAAED,UAAYC,EAAED,SAASU,OAAO,IAC1CT,EAAED,SAAW,CAACC,EAAED,SAASC,EAAED,SAASU,OAAO,KAE7C,IAAIC,EA9BW,SAACC,GAClB,IAAIC,EAAe,GAUnB,OATA1H,IAAE2H,KAAKF,GAAK,SAACjG,EAAKtB,GAChB,GAAGsB,EAAK2F,UAAkC,GAAtB3F,EAAK2F,SAASC,KAAU,CAAC,IAAD,EACN5F,EAAK2F,SAAS/I,KAA3CwJ,EADmC,EACnCA,YAAaC,EADsB,EACtBA,SAAUvH,EADY,EACZA,GAC9BoH,EAAOI,KAAK,CAAC5J,IAAK0J,EAAatD,KAAMuD,EAAUE,IAAKzH,SAEpDoH,EAAOI,KAAKtG,MAITkG,EAmBQM,CAAWlB,EAAED,UAG1B,OAFApB,EAAS+B,GACTvB,GAAW,GACJuB,IAqCTS,gBAAgB,EAChBC,SAlCmB,SAACjB,GACpB,IAAIvB,EAAI1F,IAAEmI,OAAO3F,GAAO,SAAAnC,GAAC,OAAEA,EAAEnC,KAAK+I,EAAK/I,OACvCuH,EAASC,IAiCT0C,aA9BmB,SAACnB,GACpB,OAAGA,GAAQA,EAAKhH,KAAM,UACpB4F,EAAMyB,iBAAiB,QAAS,4CACzB,GAEFL,GA0BP7I,KAAI,2BACCkI,GACAlI,IAIF4H,EACM,SAAN5G,EAAc8G,EACf,kBAAC,IAAD,CAAQ9D,SAAUA,EAAUkD,KAAMU,EAAQ,kBAACG,EAAA,EAAD,MAAmB,kBAACkC,EAAA,EAAD,OAA7D,gC,UC3GFzK,EAAS,CACX0K,QAAS,EACTC,SAAU,IAERC,EAAc,CAChBF,QAAS,EACTC,SAAU,IAINE,E,4MAEJ7C,MAAQ,CACN8C,YAAY,EACZC,aAAa,EACbC,OAAQ,CAACtI,GAAI,GAAIuI,aAAc,K,kEAI/BC,KAAKC,MAAMC,QAAQvK,YAAYb,K,+BAGxB,IAAD,OACN,MAAM,GAAN,mBAAWsD,KAAX,CAA4B,CAC1BC,MAAO,eACPI,OAAO,SAACC,GACN,OACE,oCACE,kBAAC,IAAD,CAAQvB,KAAK,QAAQb,KAAK,OAAOmG,QAAS,kBAAI,EAAK0D,SAAS,CAACN,aAAa,EAAMC,OAAQpH,MAAxF,gBACA,kBAAC,IAAD,CAAYL,MAAM,iCAAQ+H,UAAW,WACnC,EAAKH,MAAMC,QAAQrL,eAAe,CAAC2C,GAAIkB,EAAKlB,KAAK,WAC/C,EAAKyI,MAAMlD,MAAMyB,iBAAiB,WAClC,EAAKyB,MAAMC,QAAQvK,YAAYb,EAAQ,CAACyB,SAAS,SAGnD,kBAAC,IAAD,CAAQY,KAAK,QAAQb,KAAK,QAA1B,wB,+BAQF,IAAD,SAC6B0J,KAAKC,MAAlC3F,EADA,EACAA,SAAUyC,EADV,EACUA,MAAOsD,EADjB,EACiBA,SADjB,EAEmCL,KAAKlD,MAAxC8C,EAFA,EAEAA,WAAYC,EAFZ,EAEYA,YAAaC,EAFzB,EAEyBA,OAEhC,OACE,kBAACQ,EAAA,EAAD,CAAOhG,SAAUA,GACf,yBAAK9D,IAAI,KACP,kBAACsF,EAAA,EAAD,CACEC,OAAQ,kBAAC,IAAD,CAAQzF,KAAK,UAAUmG,QAAS,kBAAI,EAAK0D,SAAS,CAACP,YAAY,MAA/D,gBACRvF,cAAevF,EACfmH,YAAayD,EACb1D,aAAc,SAACN,GACb5G,EAAU4G,EAAD,2BAAwB5G,GAAW4G,GAA3BgE,EACjB,EAAKO,MAAMC,QAAQvK,YAAYb,IAEjCQ,KAAM,CACJ,CAACqE,MAAO,mBAAU6B,KAAM,WAAYlF,KAAM,aAIhD,yBAAKE,IAAI,KACP,kBAAC,IAAD,CAAOW,KAAK,QAAQoJ,QAASP,KAAKQ,SAAUC,WAAYJ,EAAStD,EAAM2D,SAASL,EAAS/I,MAAM,GAC/FqJ,WAAY5D,EAAM6D,WAAWP,GAAU,SAAAQ,GACrC/L,EAAO0K,QAAUqB,EACjB,EAAKZ,MAAMC,QAAQvK,YAAYb,SAInC,kBAACmF,EAAA,EAAD,CACE5B,MAAM,+BACNiC,SAAUA,EACVJ,QAAS0F,EACTxF,SAAU,kBAAI,EAAK+F,SAAS,CAACP,YAAY,KACzCzF,KAAM,SAACuB,GACL,EAAKuE,MAAMC,QAAQxK,YAAnB,2BACKgG,GADL,IAEEqE,aAAchD,EAAM+D,YAAYpF,EAAOqE,iBACtC,WACD,EAAKE,MAAMC,QAAQvK,YAAYb,EAAQ,CAACyB,SAAS,IACjD,EAAK4J,SAAS,CAACP,YAAY,IAC3B7C,EAAMyB,iBAAiB,eAG3BlJ,KAAM,CACJ,CAACqE,MAAO,mBAAU6B,KAAM,WAAYlF,KAAM,QAAS2E,OAAO,GAC1D,CAACtB,MAAO,2BAAQ6B,KAAM,eAAgBlF,KAAM,kBAAC,EAAD,CAAehB,KAAM,CAACyL,SAAU,UAAa9F,OAAO,GAChG,CAACtB,MAAO,UAAW6B,KAAM,UAAWlF,KAAM,QAAS2E,OAAO,GAC1D,CAACtB,MAAO,eAAM6B,KAAM,SAAUlF,KAAM,kBAACoG,EAAA,EAAD,CAAe9C,QAAM,IAAKqB,OAAO,GACrE,CAACtB,MAAO,eAAM6B,KAAM,SAAUlF,KAAM,eAIxC,kBAAC2D,EAAA,EAAD,CACE5B,MAAM,+BACNiC,SAAUA,EACVJ,QAAS2F,EACTxF,cAAa,2BAAMyF,GAAN,IAAcC,aAAchD,EAAMiE,UAAUlB,EAAOC,gBAChE3F,SAAU,kBAAI,EAAK+F,SAAS,CAACN,aAAa,KAC1C1F,KAAM,SAACuB,GACL,EAAKuE,MAAMC,QAAQzK,aAAnB,2BACKiG,GADL,IAEEqE,aAAchD,EAAM+D,YAAYpF,EAAOqE,cACvCvI,GAAIsI,EAAOtI,MACV,SAACyJ,GACF,EAAKhB,MAAMC,QAAQvK,YAAYb,EAAQ,CAACuB,IAAK4K,EAAK3K,KAAM,SACxD,EAAK6J,SAAS,CAACN,aAAa,IAC5B9C,EAAMyB,iBAAiB,eAG3BlJ,KAAM,CACJ,CAACqE,MAAO,mBAAU6B,KAAM,WAAYlF,KAAM,QAAS2E,OAAO,GAC1D,CAACtB,MAAO,2BAAQ6B,KAAM,eAAgBlF,KAAM,kBAAC,EAAD,CAAehB,KAAM,CAACyL,SAAU,UAAa9F,OAAO,GAChG,CAACtB,MAAO,UAAW6B,KAAM,UAAWlF,KAAM,QAAS2E,OAAO,GAC1D,CAACtB,MAAO,eAAM6B,KAAM,SAAUlF,KAAM,kBAACoG,EAAA,EAAD,CAAe9C,QAAM,IAAKqB,OAAO,GACrE,CAACtB,MAAO,eAAM6B,KAAM,SAAUlF,KAAM,oB,GA3GxB4K,IAAMC,WAiIftE,uBARO,SAACC,GACrB,MAAO,CACLuD,SAAUvD,EAAMsE,MAAMf,SACtBtD,MAAOD,EAAME,IAAID,MACjBzC,SAAUwC,EAAMsE,MAAM9G,aAVD,SAACtF,GACxB,MAAO,CACLkL,QAASmB,YAAmB,CAAC1L,gBAAaD,gBAAaD,iBAAcD,mBAAgBX,oBAAiBG,MAY3F6H,CAAyC8C","file":"admin/js/5.24501c16.chunk.js","sourcesContent":["import {OTHER_LOADING_START, OTHER_LOADING_END, OTHER_LOADING_NOT} from \"@admin/constant/other\"\r\nimport {fetch} from \"@public/utils\"\r\nimport MC from \"memory-cache\"\r\nimport _ from \"lodash\"\r\nimport moment from \"moment\"\r\nimport {storetApi, stateApi} from \"@public/utils/action\"\r\nconst ACTION = \"OTHER\"\r\nimport {OptProps} from \"@public/utils/action\"\r\n\r\n\r\nexport const deleteLogoLink = (params:any, next?:(...arg:any)=>void)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n    const options:any = {\r\n      url: \"/zlwj/api/resource/link-logo/deleteById\",\r\n      method: \"post\",\r\n      data: params\r\n    }\r\n    stateApi(options, dispatch, ACTION, next)\r\n  }\r\n}\r\n\r\nexport const statusLogoLink = (params:any, next?:(...arg:any)=>void)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n    const options:any = {\r\n      url: \"/zlwj/api/resource/link-logo/enable\",\r\n      method: \"post\",\r\n      data: params\r\n    }\r\n    stateApi(options, dispatch, ACTION, next)\r\n  }\r\n}\r\n\r\nexport const editLogoLink = (params:any, next?:(...arg:any)=>void)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n    const options:any = {\r\n      url: \"/zlwj/api/resource/link-logo/updateById\",\r\n      method: \"post\",\r\n      data: params\r\n    }\r\n    stateApi(options, dispatch, ACTION, next)\r\n  }\r\n}\r\n\r\nexport const addLogoLink = (params:any, next?:(...arg:any)=>void)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n    const options:any = {\r\n      url: \"/zlwj/api/resource/link-logo/save\",\r\n      method: \"post\",\r\n      data: params\r\n    }\r\n    stateApi(options, dispatch, ACTION, next)\r\n  }\r\n}\r\n\r\nexport const getLogoLink = (params:any, opt?:OptProps)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n    const options:any = {\r\n      url: \"/zlwj/api/resource/link-logo/page\",\r\n      method: \"get\",\r\n      data: params\r\n    }\r\n\r\n    storetApi(options, \"logolink\", dispatch, ACTION, opt)\r\n  }\r\n}\r\n\r\nexport const statusResType = (params:any, next?:(...arg:any)=>void)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n    const options:any = {\r\n      url: \"/zlwj/api/resource/link-type/enable\",\r\n      method: \"post\",\r\n      data: params\r\n    }\r\n    stateApi(options, dispatch, ACTION, next)\r\n  }\r\n}\r\n\r\n\r\nexport const deleteResType = (params:any, next?:(...arg:any)=>void)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n    const options:any = {\r\n      url: \"/zlwj/api/resource/link-type/deleteById\",\r\n      method: \"post\",\r\n      data: params\r\n    }\r\n    stateApi(options, dispatch, ACTION, next)\r\n  }\r\n}\r\n\r\nexport const editResType = (params:any, next?:(...arg:any)=>void)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n    const options:any = {\r\n      url: \"/zlwj/api/resource/link-type/updateById\",\r\n      method: \"post\",\r\n      data: params\r\n    }\r\n    stateApi(options, dispatch, ACTION, next)\r\n  }\r\n}\r\n\r\nexport const addResType = (params:any, next?:(...arg:any)=>void)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n    const options:any = {\r\n      url: \"/zlwj/api/resource/link-type/save\",\r\n      method: \"post\",\r\n      data: params\r\n    }\r\n    stateApi(options, dispatch, ACTION, next)\r\n  }\r\n}\r\n\r\nexport const getResTypeList = (params:any, opt?:OptProps)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n    const options:any = {\r\n      url: \"/zlwj/api/resource/link-type/page\",\r\n      method: \"get\",\r\n      data: params\r\n    }\r\n\r\n    storetApi(options, \"restype\", dispatch, ACTION, opt)\r\n  }\r\n}\r\n\r\n\r\n\r\n/**\r\n * list API公共方法\r\n * \r\n */\r\ninterface OptionListProps{\r\n  options: any;\r\n  dispatch:any;\r\n  keyName: string;\r\n  obj?:any;\r\n  next?:(...arg0:any)=>void;\r\n  type?:string;  //\"add\" | \"edit\"\r\n  refresh?: boolean\r\n}\r\n\r\ninterface ParamsListProps{\r\n  params: any;\r\n  obj?:any;\r\n  next?:(...arg0:any)=>void;\r\n  type?:string;  //\"add\" | \"edit\"\r\n  refresh?: boolean\r\n}\r\n// options:any,keyName:string, obj?:any, next?:(...arg0:any)=>void\r\nconst optionList = async (opt: OptionListProps)=>{\r\n    const {options,dispatch, keyName, obj, next, type, refresh} = opt;\r\n    try{\r\n      let key = options.url+JSON.stringify(options.data)\r\n      let isCache = MC.get(key)\r\n      \r\n    if(!isCache || refresh){\r\n      dispatch({\r\n        type: OTHER_LOADING_START\r\n      })\r\n      let data:any = await fetch(options)\r\n      if(next)next(data)\r\n      MC.put(key, data)\r\n      dispatch({\r\n        type: OTHER_LOADING_END,\r\n        [keyName]: data\r\n      })\r\n    }else{\r\n      if(obj && _.size(obj)){\r\n        let index = _.findIndex(isCache.list, (o:any)=>o.id==obj.id)\r\n        if(type==\"edit\"){\r\n          isCache.list[index] = _.assign(isCache.list[index], obj);\r\n        }else if(type==\"add\"){\r\n          isCache.list[index] = _.assign(isCache.list[index], obj);\r\n        }\r\n\r\n        MC.put(key, isCache)\r\n        dispatch({\r\n          type: OTHER_LOADING_NOT,\r\n          [keyName]: isCache\r\n        })\r\n      }else{\r\n        dispatch({\r\n          type: OTHER_LOADING_NOT,\r\n          [keyName]: isCache\r\n        })\r\n      }\r\n      \r\n    }\r\n    \r\n  }catch(e){\r\n    console.log(e)\r\n    dispatch({type: OTHER_LOADING_END})\r\n  }\r\n  \r\n}\r\n\r\n\r\nexport const deleteSysResource = (params:any, next:Function)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n    dispatch({\r\n      type: OTHER_LOADING_START,\r\n    })\r\n    try{\r\n      const options:any = {\r\n        url: \"/zlwj/api/system/sys/sys-resource/removeById\",\r\n        method: \"post\",\r\n        data: params\r\n      }\r\n      let data:any = await fetch(options)\r\n      if(next)next(data)\r\n      dispatch({\r\n        type: OTHER_LOADING_END,\r\n      })\r\n      \r\n    }catch(e){\r\n      console.log(e)\r\n      dispatch({type: OTHER_LOADING_END})\r\n    }\r\n  }\r\n}\r\n\r\nexport const editSysResource = (params:any, next:Function)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n    dispatch({\r\n      type: OTHER_LOADING_START,\r\n    })\r\n    try{\r\n      const options:any = {\r\n        url: \"/zlwj/api/system/sys/sys-resource/updateById\",\r\n        method: \"post\",\r\n        data: params\r\n      }\r\n      let data:any = await fetch(options)\r\n      if(next)next(data)\r\n      dispatch({\r\n        type: OTHER_LOADING_END,\r\n      })\r\n      \r\n    }catch(e){\r\n      console.log(e)\r\n      dispatch({type: OTHER_LOADING_END})\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\nexport const addSysResource = (params:any, next:Function)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n    dispatch({\r\n      type: OTHER_LOADING_START,\r\n    })\r\n    try{\r\n      const options:any = {\r\n        url: \"/zlwj/api/system/sys/sys-resource/save\",\r\n        method: \"post\",\r\n        data: params\r\n      }\r\n      let data:any = await fetch(options)\r\n      if(next)next(data)\r\n      dispatch({\r\n        type: OTHER_LOADING_END,\r\n      })\r\n      \r\n    }catch(e){\r\n      console.log(e)\r\n      dispatch({type: OTHER_LOADING_END})\r\n    }\r\n  }\r\n}\r\n\r\nexport const getSystemLink = (opt:any)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n\r\n    const {params, obj, next, type, refresh=false} = opt\r\n    const options:any = {\r\n      url: \"/zlwj/api/resource/link-type/selectSystemLink\",\r\n      method: \"get\",\r\n      data: params\r\n    }\r\n    optionList({\r\n      options,\r\n      dispatch,\r\n      keyName: \"systemlink\", obj, next, refresh, type})\r\n  }\r\n}\r\n\r\nexport const getSysResource = (opt:any)=>{\r\n  return async (dispatch:Function, getState:any)=>{\r\n\r\n    const {params, obj, next, type, refresh=false} = opt\r\n    const options:any = {\r\n      url: \"/zlwj/api/system/sys/sys-resource/page\",\r\n      method: \"get\",\r\n      data: params\r\n    }\r\n    optionList({\r\n      options,\r\n      dispatch,\r\n      keyName: \"resource\", obj, next, refresh, type})\r\n  }\r\n}","import React from \"react\"\r\nimport { Typography } from \"antd\"\r\n\r\nconst { Paragraph } = Typography;\r\n\r\n\r\nexport const logoLinkColumns = [\r\n  {\r\n    title: \"LOGO名称\",\r\n    dataIndex: \"logoName\"\r\n  },\r\n  {\r\n    title: \"LOGO URL\",\r\n    dataIndex: \"logoUrl\"\r\n  },\r\n  {\r\n    title: \"创建信息\",\r\n    dataIndex: \"buildTime\"\r\n  },\r\n  {\r\n    title: \"修改信息\",\r\n    dataIndex: \"updateTime\"\r\n  },\r\n]\r\n\r\nexport const restypeColumns = [\r\n  {\r\n    title: \"资源类型编号\",\r\n    dataIndex: \"linkCode\"\r\n  },\r\n  {\r\n    title: \"资源类型名称\",\r\n    dataIndex: \"linkName\"\r\n  },\r\n  {\r\n    title: \"资源服务器类型\",\r\n    dataIndex: \"resourceType\"\r\n  },\r\n  {\r\n    title: \"文件类型\",\r\n    dataIndex: \"fileType\"\r\n  },\r\n  {\r\n    title: \"文件大小限制\",\r\n    dataIndex: \"fileSize\"\r\n  },\r\n  {\r\n    title: \"可上传资源后缀\",\r\n    dataIndex: \"fileSuffixCollect\"\r\n  },\r\n  {\r\n    title: \"创建信息\",\r\n    dataIndex: \"buildTime\"\r\n  },\r\n  {\r\n    title: \"修改信息\",\r\n    dataIndex: \"updateTime\"\r\n  },\r\n]\r\n\r\nexport const resourceColumns = [\r\n  {\r\n    title: \"资源key\",\r\n    dataIndex: \"resourceKey\"\r\n  },\r\n  {\r\n    title: \"附件名称\",\r\n    dataIndex: \"annexName\"\r\n  },\r\n  {\r\n    title: \"文件下载路径\",\r\n    dataIndex: \"resourceDownload\",\r\n    render:(item:string)=>(\r\n      <div style={{width: 180}} title={item}>\r\n        <Paragraph copyable ellipsis >{item}</Paragraph>\r\n      </div>\r\n    )\r\n  },\r\n  {\r\n    title: \"文件存储路径\",\r\n    dataIndex: \"resourceStorage\",\r\n    render:(item:string)=>(\r\n      <div style={{width: 180}} title={item}>\r\n        <Paragraph copyable ellipsis >{item}</Paragraph>\r\n      </div>\r\n    )\r\n  },\r\n  {\r\n    title: \"文件后缀\",\r\n    dataIndex: \"suffix\"\r\n  },\r\n  {\r\n    title: \"文件大小\",\r\n    dataIndex: \"size\"\r\n  },\r\n  {\r\n    title: \"创建信息\",\r\n    dataIndex: \"buildTime\"\r\n  },\r\n  {\r\n    title: \"更新信息\",\r\n    dataIndex: \"updateTime\"\r\n  },\r\n]","import React, { ReactNode } from \"react\"\r\nimport {Input, InputNumber, Select, DatePicker} from \"antd\"\r\nconst {TextArea} = Input\r\nconst {Option} = Select\r\nconst {RangePicker} = DatePicker\r\n\r\ninterface selectListProps {\r\n  label: string,\r\n  id: any;\r\n}\r\n\r\nexport interface ItemType {\r\n  label?: ReactNode,\r\n  name: string,\r\n  type: any,\r\n  selectList?: selectListProps[];\r\n  initialValue?:any;\r\n  valuePropName?:string;\r\n  notAll?:boolean;\r\n  rules?:any;\r\n  disabled?:boolean;\r\n}\r\n\r\nexport const getNode = (item:ItemType)=>{\r\n  switch(item.type){\r\n    case \"input\":\r\n      return <Input disabled={item.disabled} />\r\n    case \"textarea\":\r\n      return <TextArea disabled={item.disabled} />\r\n    case \"inputNumber\":\r\n      return <InputNumber style={{width: \"100%\"}} disabled={item.disabled} />\r\n    case \"datepicker\":\r\n      return <DatePicker style={{width: \"100%\"}} disabled={item.disabled} />\r\n    case \"rangepicker\":\r\n      return <RangePicker style={{width: \"100%\"}} disabled={item.disabled} />\r\n    case \"select\":\r\n      return (\r\n        <Select disabled={item.disabled} >\r\n          {item.selectList?.map(elem=>(\r\n            <Option key={elem.id} value={elem.id} >{elem.label}</Option>\r\n          ))}\r\n        </Select>\r\n      )\r\n    case \"status\":\r\n      return (\r\n        <Select disabled={item.disabled} >\r\n          {item.notAll?null:<Option value=\"\">全部</Option>}\r\n          <Option value={1}>启用</Option>\r\n          <Option value={0}>禁用</Option>\r\n        </Select>\r\n      )\r\n  }\r\n\r\n  return item.type;\r\n}","import React, { useEffect, useState } from \"react\"\r\nimport { Form, Modal } from \"antd\"\r\nimport {ItemType, getNode} from \"./getnode\"\r\n\r\n\r\ninterface ItemTypeProps extends ItemType {\r\n  rules?: boolean | any[];\r\n  wrapperCol?:any;\r\n  labelCol?:any;\r\n  valuePropName?:any;\r\n}\r\n\r\ninterface Props {\r\n  visible: boolean;\r\n  width?:number;\r\n  onOk: (...arg0:any)=>void;\r\n  onCancel:()=>void;\r\n  title?:any;\r\n  data:ItemTypeProps[];\r\n  initialValues?:any;\r\n  spinning?:boolean;\r\n  \r\n}\r\n\r\nconst layout = {\r\n  labelCol: { span: 5 },\r\n  wrapperCol: { span: 16 },\r\n};\r\n\r\nconst AddModular:React.FC<Props> = ({\r\n  visible,\r\n  width,\r\n  onOk,\r\n  onCancel,\r\n  title,\r\n  data,\r\n  initialValues,\r\n  spinning,  \r\n})=>{\r\n  const [form] = Form.useForm();\r\n  const [modalVisible, setModalVisible] = useState(false)\r\n\r\n  useEffect(()=>{\r\n    if(visible){\r\n      setModalVisible(true)\r\n      if(initialValues){\r\n        form.setFieldsValue(initialValues)\r\n      }else{\r\n        form.resetFields()\r\n      }\r\n      \r\n    }\r\n\r\n  }, [visible])\r\n\r\n  const handleRules = (item:ItemTypeProps)=>{\r\n    if(typeof item.rules === 'boolean'){\r\n      return [{required: true, message: `${item.label || \"\"}不能为空！`}]\r\n    }else if(typeof item.rules === 'object'){\r\n      return item.rules;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  return (\r\n    !visible && !modalVisible?null:\r\n    <Modal\r\n      title={title || null}\r\n      visible={visible}\r\n      width={width || 560}\r\n      onCancel={()=>{\r\n        form.resetFields()\r\n        onCancel()\r\n      }}\r\n      destroyOnClose\r\n      onOk={()=>form.submit()}\r\n      confirmLoading={spinning}\r\n      afterClose={()=>{\r\n        setModalVisible(false)\r\n      }}\r\n    >\r\n      <Form \r\n        name=\"addModular\" \r\n        {...layout}\r\n        form={form} onFinish={(values)=>onOk(values)} initialValues={initialValues} >\r\n        {data.map((item, index)=>(\r\n          <Form.Item \r\n            key={index} \r\n            label={item.label} \r\n            name={item.name} \r\n            initialValue={item.initialValue}\r\n            rules={handleRules(item)}\r\n            wrapperCol={item.wrapperCol}\r\n            labelCol={item.labelCol}\r\n            valuePropName={item.valuePropName}\r\n            >\r\n            {getNode(item)}\r\n          </Form.Item>\r\n        ))}\r\n      </Form>\r\n\r\n    </Modal>\r\n  )\r\n}\r\n\r\n\r\nexport default AddModular;","import React, { ReactNode } from \"react\"\r\nimport { Button, Card, Form, Input, InputNumber} from \"antd\"\r\nimport {ItemType, getNode} from \"./getnode\"\r\nimport { RetweetOutlined, SearchOutlined } from \"@ant-design/icons\";\r\nimport { FormLayout } from \"antd/lib/form/Form\";\r\n\r\n\r\n\r\ninterface Props {\r\n  before?: ReactNode;\r\n  data: ItemType[];\r\n  submitSearch: Function;\r\n  initialValues: any;\r\n  resetValues?:any;\r\n  layout?:FormLayout; //inline | vertical | horizontal\r\n  bordered?:boolean;\r\n}\r\n\r\nconst SearchModular:React.FC<Props> = ({\r\n  before,\r\n  data,\r\n  submitSearch,\r\n  initialValues,\r\n  resetValues,\r\n  layout=\"inline\",\r\n  bordered\r\n})=>{\r\n  const [form] = Form.useForm();\r\n\r\n  const submitReset = ()=>{\r\n    form.setFieldsValue(resetValues)\r\n    submitSearch()\r\n  }\r\n\r\n  const handleRules = (item:ItemType)=>{\r\n    if(typeof item.rules === 'boolean'){\r\n      return [{required: true, message: `${item.label||\"\"}不能为空！`}]\r\n    }else if(typeof item.rules === 'object'){\r\n      return item.rules;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  return (\r\n    <Card size=\"small\" bordered={bordered} >\r\n      <div className={layout==\"inline\"?\"flexbetween\":\"\"} >\r\n        <div style={layout==\"inline\"?{marginRight:30}:{marginBottom: 20}}  >\r\n          {before}\r\n        </div>\r\n        <div>\r\n          <Form form={form} \r\n            layout={layout}\r\n            onFinish={(values)=>submitSearch({...values})}\r\n            initialValues={initialValues}\r\n          > \r\n            {data.map((item, index)=>(\r\n              <Form.Item\r\n                key={index}\r\n                label={item.label||null}\r\n                name={item.name}\r\n                initialValue={item.initialValue}\r\n                valuePropName={item.valuePropName || \"value\"}\r\n                rules={handleRules(item)}\r\n              >\r\n                {getNode(item)}\r\n              </Form.Item>\r\n            ))}\r\n            <Form.Item >\r\n              <Button type=\"primary\" ghost htmlType=\"submit\" icon={<SearchOutlined />}>搜索</Button>\r\n              {resetValues?\r\n              <Button className=\"mgl10\" onClick={submitReset} icon={<RetweetOutlined />}>重置</Button>:null}\r\n            </Form.Item>\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    </Card>\r\n    \r\n  )\r\n}\r\n\r\nexport default SearchModular;","import React from \"react\"\r\nimport {Select} from \"antd\"\r\nimport { SizeType } from \"antd/lib/config-provider/SizeContext\";\r\n\r\nconst {Option} = Select;\r\n\r\n\r\ninterface Props {\r\n  value?:any;\r\n  onChange?:any;\r\n  notAll?:boolean;\r\n  size?:SizeType;\r\n}\r\n\r\nconst StatusElement: React.FC<Props> = ({value, onChange, notAll, size})=>{\r\n  return (\r\n    <Select size={size} value={value} onChange={(v)=>{\r\n      if(onChange){\r\n        onChange(v)\r\n      }\r\n    }} >\r\n      {notAll?null:<Option value=\"\" >全部</Option>}\r\n      <Option value={1} >启用</Option>\r\n      <Option value={0} >禁用</Option>\r\n    </Select>\r\n  )\r\n}\r\n\r\nexport default StatusElement","import React, { useState } from \"react\"\r\nimport { Button, Upload } from \"antd\"\r\nimport { connect } from \"react-redux\"\r\nimport { UtilsProps } from \"@public/common/interface\"\r\nimport { LoadingOutlined, PlusOutlined, UploadOutlined } from \"@ant-design/icons\"\r\nimport _ from \"lodash\"\r\n\r\ninterface DataProps {\r\n  companyCode?:any;\r\n  fileType?:any;\r\n  fileSize?:any;\r\n  heCode?:any;\r\n  resourceType?:any;\r\n  linkType?:any;\r\n  userId?:any;\r\n  isFlag?:any;\r\n  companyId?:any;\r\n  itemId?:any;\r\n  temId?:any;\r\n}\r\n\r\n\r\ninterface Props {\r\n  data?:DataProps;\r\n  utils: UtilsProps;\r\n  type?:string;\r\n  onChange?:any;\r\n  value?:any;\r\n  more?:boolean;\r\n  disabled?:boolean\r\n}\r\n\r\nconst UploadElement:React.FC<Props> = ({\r\n  data={}, \r\n  utils, \r\n  type=\"image\",\r\n  onChange,\r\n  value,\r\n  more=false,\r\n  disabled\r\n})=>{\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const handleData = (arr:any[])=>{\r\n    var newArr:any[] = [];\r\n    _.each(arr, (item,index)=>{\r\n      if(item.response && item.response.code == 1){\r\n        const {downloadUrl, fileName, id} = item.response.data\r\n        newArr.push({url: downloadUrl, name: fileName, uid: id })\r\n      }else{\r\n        newArr.push(item)\r\n      }\r\n    })\r\n    \r\n    return newArr;\r\n  }\r\n\r\n  const handleChange = (e:any)=>{\r\n    setLoading(true)\r\n    if (Array.isArray(e)) {\r\n      return e;\r\n    }\r\n    if(e.file.status == \"done\"){\r\n      const {code, msg} = e.file.response\r\n      if(code!=1){\r\n        utils.OpenNotification(\"error\", msg)\r\n        return;\r\n      }\r\n    }\r\n    if( onChange){\r\n      if(!more && e.fileList && e.fileList.length>1){\r\n        e.fileList = [e.fileList[e.fileList.length-1]]\r\n      }\r\n      let imgArr = handleData(e.fileList);\r\n      onChange(imgArr)\r\n      setLoading(false)\r\n      return imgArr\r\n    }\r\n  }\r\n\r\n  const handleRemove = (file:any)=>{\r\n    let v = _.filter(value, o=>o.url!=file.url)\r\n    onChange(v)\r\n  }\r\n\r\n  const beforeUpload = (file:any)=>{\r\n    if(file && file.size>(1024*1024*10)){ \r\n      utils.OpenNotification(\"error\", \"附件不能大于10M\")\r\n      return false;\r\n    }\r\n    return file;\r\n  }\r\n\r\n  const uploadButton = (\r\n    <div>\r\n      {loading?<LoadingOutlined/>:<PlusOutlined />}\r\n      <div style={{ marginTop: 8 }}>上传图片</div>\r\n    </div>\r\n  );\r\n  const initialData = {\r\n    token: utils.getToken(),\r\n    isFlag: 0,\r\n    resourceType: \"0\",\r\n  }\r\n\r\n  return (\r\n    <Upload\r\n    disabled={disabled}\r\n    action=\"/zlwj/api/resource/file/uploadFile\"\r\n    listType={type==\"image\"?\"picture-card\":\"text\"}\r\n    name=\"file\"\r\n    fileList={ value || [] }\r\n    onChange={handleChange}\r\n    showUploadList={true}\r\n    onRemove={handleRemove}\r\n    beforeUpload={beforeUpload}\r\n    data={{\r\n      ...initialData,\r\n      ...data\r\n    }}\r\n    >\r\n\r\n      {loading}\r\n      {type==\"image\"?uploadButton:\r\n      <Button disabled={disabled} icon={loading?<LoadingOutlined/>:<UploadOutlined />}>上传附件</Button>}\r\n    </Upload>\r\n  )\r\n}\r\n\r\nconst mapStateProps = (state:any)=>{\r\n  return {\r\n    utils:state.app.utils\r\n  }\r\n}\r\n\r\nexport default connect(mapStateProps)(UploadElement)","import React from \"react\"\r\nimport {connect} from \"react-redux\"\r\nimport { bindActionCreators } from \"redux\";\r\nimport {IProps} from \"@public/common/interface\"\r\nimport JCard from \"@admin/components/JCard\"\r\nimport {getLogoLink, addLogoLink, editLogoLink, statusLogoLink, deleteLogoLink} from \"@admin/actions/otherAction\"\r\nimport { Button, Popconfirm, Table } from \"antd\";\r\nimport {logoLinkColumns} from \"../columns\"\r\nimport SearchModular from \"@public/components/Modular/SearchModular\";\r\nimport AddModular from \"@public/components/Modular/AddModular\";\r\nimport UploadElement from \"@public/components/Element/UploadElement\";\r\nimport StatusElement from \"@public/components/Element/StatusElement\";\r\n\r\ninterface Props extends IProps {\r\n  logolink:any;\r\n}\r\n\r\nlet params = {\r\n  current: 1,\r\n  logoName: \"\"\r\n}\r\nlet resetParams = {\r\n  current: 1,\r\n  logoName: \"\"\r\n}\r\n\r\n\r\nclass Watermark extends React.Component<Props> {\r\n\r\n  state = {\r\n    addVisible: false,\r\n    editVisible: false,\r\n    detail: {id: \"\", logoRealPath: \"\"}\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.props.actions.getLogoLink(params)\r\n  }\r\n\r\n  getCol(){\r\n    return [...logoLinkColumns, {\r\n      title: \"操作\",\r\n      render:(item:any)=>{\r\n        return (\r\n          <>\r\n            <Button size=\"small\" type=\"link\" onClick={()=>this.setState({editVisible: true, detail: item})} >编辑</Button>\r\n            <Popconfirm title=\"是否删除？\" onConfirm={()=>{\r\n              this.props.actions.deleteLogoLink({id: item.id}, ()=>{\r\n                this.props.utils.OpenNotification(\"success\")\r\n                this.props.actions.getLogoLink(params, {refresh: true})\r\n              })\r\n            }}>\r\n              <Button size=\"small\" type=\"link\" >删除</Button>\r\n            </Popconfirm>\r\n          </>\r\n        )\r\n      }\r\n    }]\r\n  }\r\n\r\n  render() {\r\n    const {spinning, utils, logolink} = this.props\r\n    const {addVisible, editVisible, detail} = this.state\r\n\r\n    return (\r\n      <JCard spinning={spinning}> \r\n        <div key=\"a\">\r\n          <SearchModular\r\n            before={<Button type=\"primary\" onClick={()=>this.setState({addVisible: true})} >新增</Button>}\r\n            initialValues={params}\r\n            resetValues={resetParams}\r\n            submitSearch={(values:any)=>{\r\n              params = !values?resetParams:{...params, ...values}\r\n              this.props.actions.getLogoLink(params)\r\n            }}\r\n            data={[\r\n              {label: \"LOGO名称\", name: \"logoName\", type: \"input\"}\r\n            ]}\r\n          />\r\n        </div>\r\n        <div key=\"b\">\r\n          <Table size=\"small\" columns={this.getCol()} dataSource={logolink?utils.addIndex(logolink.list):[]} \r\n          pagination={utils.Pagination(logolink, page=>{\r\n            params.current = page\r\n            this.props.actions.getLogoLink(params)\r\n          })} />\r\n        </div>\r\n\r\n        <AddModular\r\n          title=\"新增水印LOGO\"\r\n          spinning={spinning}\r\n          visible={addVisible}\r\n          onCancel={()=>this.setState({addVisible: false})}\r\n          onOk={(values:any)=>{\r\n            this.props.actions.addLogoLink({\r\n              ...values, \r\n              logoRealPath: utils.submitFiles(values.logoRealPath)\r\n            }, ()=>{\r\n              this.props.actions.getLogoLink(params, {refresh: true})\r\n              this.setState({addVisible: false})\r\n              utils.OpenNotification(\"success\")\r\n            })\r\n          }}\r\n          data={[\r\n            {label: \"LOGO名称\", name: \"logoName\", type: \"input\", rules: true},\r\n            {label: \"上传文件\", name: \"logoRealPath\", type: <UploadElement data={{fileType: \"logo\"}} />, rules: true},\r\n            {label: \"LOGO UR\", name: \"logoUrl\", type: \"input\", rules: true},\r\n            {label: \"状态\", name: \"status\", type: <StatusElement notAll />, rules: true},\r\n            {label: \"备注\", name: \"remark\", type: \"textarea\"},\r\n          ]}\r\n        />\r\n\r\n        <AddModular\r\n          title=\"编辑水印LOGO\"\r\n          spinning={spinning}\r\n          visible={editVisible}\r\n          initialValues={{...detail, logoRealPath: utils.echoFiles(detail.logoRealPath)}}\r\n          onCancel={()=>this.setState({editVisible: false})}\r\n          onOk={(values:any)=>{\r\n            this.props.actions.editLogoLink({\r\n              ...values, \r\n              logoRealPath: utils.submitFiles(values.logoRealPath),\r\n              id: detail.id\r\n            }, (res:any)=>{\r\n              this.props.actions.getLogoLink(params, {obj: res, type: \"edit\"})\r\n              this.setState({editVisible: false})\r\n              utils.OpenNotification(\"success\")\r\n            })\r\n          }}\r\n          data={[\r\n            {label: \"LOGO名称\", name: \"logoName\", type: \"input\", rules: true},\r\n            {label: \"上传文件\", name: \"logoRealPath\", type: <UploadElement data={{fileType: \"logo\"}} />, rules: true},\r\n            {label: \"LOGO UR\", name: \"logoUrl\", type: \"input\", rules: true},\r\n            {label: \"状态\", name: \"status\", type: <StatusElement notAll />, rules: true},\r\n            {label: \"备注\", name: \"remark\", type: \"textarea\"},\r\n          ]}\r\n        />\r\n      </JCard>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchProps = (dispatch:any)=>{\r\n  return {\r\n    actions: bindActionCreators({getLogoLink, addLogoLink, editLogoLink, statusLogoLink, deleteLogoLink}, dispatch)\r\n  }\r\n}\r\n\r\nconst mapStateProps = (state:any)=>{\r\n  return {\r\n    logolink: state.other.logolink,\r\n    utils: state.app.utils,\r\n    spinning: state.other.spinning\r\n  }\r\n}\r\n\r\nexport default connect(mapStateProps, mapDispatchProps)(Watermark)"],"sourceRoot":""}