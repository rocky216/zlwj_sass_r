(this.webpackJsonpzlwj_sass_r=this.webpackJsonpzlwj_sass_r||[]).push([[11],{1211:function(e,t,a){"use strict";var n=a(4),r=a.n(n),i=a(14),l=a.n(i),s=a(0),o=a(5),c=a.n(o),u=a(279),d=a.n(u),p=a(12),m=a(170),f=a(84),b=a(213),y=a(90),v=a(118),E=a(95),h=a(42),O=void 0,g=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},x=s.forwardRef((function(e,t){var a=s.useState(e.visible),n=l()(a,2),i=n[0],o=n[1];s.useEffect((function(){"visible"in e&&o(e.visible)}),[e.visible]),s.useEffect((function(){"defaultVisible"in e&&o(e.defaultVisible)}),[e.defaultVisible]);var u=function(t,a){"visible"in e||o(t),e.onVisibleChange&&e.onVisibleChange(t,a)},d=function(t){u(!1,t),e.onConfirm&&e.onConfirm.call(O,t)},x=function(t){u(!1,t),e.onCancel&&e.onCancel.call(O,t)},j=s.useContext(E.b).getPrefixCls,k=e.prefixCls,S=e.placement,w=e.children,C=e.overlayClassName,I=g(e,["prefixCls","placement","children","overlayClassName"]),N=j("popover",k),z=j("popconfirm",k),V=c()(z,C),R=s.createElement(y.a,{componentName:"Popconfirm",defaultLocale:v.a.Popconfirm},(function(t){return function(t,a){var n,i=e.okButtonProps,l=e.cancelButtonProps,o=e.title,c=e.cancelText,u=e.okText,p=e.okType,m=e.icon;return s.createElement("div",{className:"".concat(t,"-inner-content")},s.createElement("div",{className:"".concat(t,"-message")},m,s.createElement("div",{className:"".concat(t,"-message-title")},(n=o)?"function"===typeof n?n():n:null)),s.createElement("div",{className:"".concat(t,"-buttons")},s.createElement(f.a,r()({onClick:x,size:"small"},l),c||a.cancelText),s.createElement(f.a,r()({onClick:d},Object(b.a)(p),{size:"small"},i),u||a.okText)))}(N,t)}));return s.createElement(m.a,r()({},I,{prefixCls:N,placement:S,onVisibleChange:function(t){e.disabled||u(t)},visible:i,overlay:R,overlayClassName:V,ref:t}),Object(h.a)(w,{onKeyDown:function(e){var t,a;s.isValidElement(w)&&(null===(a=null===w||void 0===w?void 0:(t=w.props).onKeyDown)||void 0===a||a.call(t,e)),function(e){e.keyCode===p.a.ESC&&i&&u(!1,e)}(e)}}))}));x.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:s.createElement(d.a,null),disabled:!1};t.a=x},1233:function(e,t,a){"use strict";a.r(t);var n=a(81),r=a(280),i=a(68),l=a(69),s=a(77),o=a(76),c=a(0),u=a.n(c),d=a(66),p=a(80),m=a(212),f=a(16),b=a.n(f),y=a(126),v=a(56),E=a(363),h=a(57),O=a(105),g=a.n(O),x=a(62),j=a.n(x),k=function(){var e=Object(v.a)(b.a.mark((function e(t){var a,n,r,i,l,s,o,c,u,d,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.options,n=t.dispatch,r=t.keyName,i=t.obj,l=t.next,s=t.type,o=t.refresh,e.prev=1,c=a.url+JSON.stringify(a.data),(u=g.a.get(c))&&!o){e.next=14;break}return n({type:E.c}),e.next=8,Object(h.e)(a);case 8:d=e.sent,l&&l(d),g.a.put(c,d),n(Object(y.a)({type:E.a},r,d)),e.next=15;break;case 14:i&&j.a.size(i)?(p=j.a.findIndex(u.list,(function(e){return e.id==i.id})),("edit"==s||"add"==s)&&(u.list[p]=j.a.assign(u.list[p],i)),g.a.put(c,u),n(Object(y.a)({type:E.b},r,u))):n(Object(y.a)({type:E.b},r,u));case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0),n({type:E.a});case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),S=function(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n,r){var i,l;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:E.c}),a.prev=1,i={url:"/zlwj/api/system/sys/sys-resource/removeById",method:"post",data:e},a.next=5,Object(h.e)(i);case 5:l=a.sent,t&&t(l),n({type:E.a}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),console.log(a.t0),n({type:E.a});case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e,t){return a.apply(this,arguments)}}()},w=function(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n,r){var i,l;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:E.c}),a.prev=1,i={url:"/zlwj/api/system/sys/sys-resource/updateById",method:"post",data:e},a.next=5,Object(h.e)(i);case 5:l=a.sent,t&&t(l),n({type:E.a}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),console.log(a.t0),n({type:E.a});case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e,t){return a.apply(this,arguments)}}()},C=function(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n,r){var i,l;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:E.c}),a.prev=1,i={url:"/zlwj/api/system/sys/sys-resource/save",method:"post",data:e},a.next=5,Object(h.e)(i);case 5:l=a.sent,t&&t(l),n({type:E.a}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),console.log(a.t0),n({type:E.a});case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e,t){return a.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(v.a)(b.a.mark((function t(a,n){var r,i,l,s,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.params,i=e.obj,l=e.next,s=e.type,o=e.refresh,k({options:{url:"/zlwj/api/system/sys/sys-resource/page",method:"get",data:r},dispatch:a,keyName:"resource",obj:i,next:l,refresh:void 0!==o&&o,type:s});case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},N=a(1230).a.Paragraph,z=[{title:"\u8d44\u6e90key",dataIndex:"resourceKey"},{title:"\u9644\u4ef6\u540d\u79f0",dataIndex:"annexName"},{title:"\u6587\u4ef6\u4e0b\u8f7d\u8def\u5f84",dataIndex:"resourceDownload",render:function(e){return u.a.createElement("div",{style:{width:180},title:e},u.a.createElement(N,{copyable:!0,ellipsis:!0},e))}},{title:"\u6587\u4ef6\u5b58\u50a8\u8def\u5f84",dataIndex:"resourceStorage",render:function(e){return u.a.createElement("div",{style:{width:180},title:e},u.a.createElement(N,{copyable:!0,ellipsis:!0},e))}},{title:"\u6587\u4ef6\u540e\u7f00",dataIndex:"suffix"},{title:"\u6587\u4ef6\u5927\u5c0f",dataIndex:"size"},{title:"\u521b\u5efa\u4fe1\u606f",dataIndex:"buildTime"},{title:"\u66f4\u65b0\u4fe1\u606f",dataIndex:"updateTime"}],V=a(84),R=a(1211),U=a(211),P=a(1190),T=a(1200),F=a(441),q=a(91),L=a(247),K=a(1189),D=a(1188),H={labelCol:{span:4},wrapperCol:{span:19}},A=Object(d.b)((function(e){return{utils:e.app.utils}}))((function(e){var t=e.onCancel,a=e.visible,n=e.title,r=e.utils,i=e.onOk,l=L.a.useForm(),s=Object(q.a)(l,1)[0],o=Object(c.useState)(),d=Object(q.a)(o,2),p=(d[0],d[1]);return u.a.createElement(K.a,{title:n,visible:a,onCancel:t,onOk:function(){return s.submit()}},u.a.createElement(L.a,Object.assign({form:s},H,{onFinish:function(e){console.log(e);var t=j.a.omit(e,"filearr");i(t)}}),u.a.createElement(L.a.Item,{label:"\u8d44\u6e90\u540d\u79f0",name:"annexName",rules:[{required:!0}]},u.a.createElement(U.a,null)),u.a.createElement(L.a.Item,{label:"\u8d44\u6e90KEY",name:"resourceKey",rules:[{required:!0}]},u.a.createElement(U.a,null)),u.a.createElement(L.a.Item,{label:"\u4e0a\u4f20\u9644\u4ef6",name:"filearr",rules:[{required:!0}],valuePropName:"fileList",getValueFromEvent:function(e){if(console.log("Upload event:",e),Array.isArray(e))return e;if("done"==e.file.status){var t=e.file.response,a=t.code,n=t.data,i=t.msg;if(1!=a)return r.OpenNotification("error",i),null;p(n),s.setFieldsValue({resourceId:n.id,resourceDownload:n.dowloadHttpUrl,dowloadHttpUrl:n.dowloadHttpPdfUrl,resourceStorage:n.flieUrl,suffix:n.suffixName,size:n.fileSize}),e.fileList=[e.file]}return e.file&&e.fileList}},u.a.createElement(D.a,{action:"/zlwj/api/resource/file/uploadFile",name:"file",data:{token:r.getToken(),resourceType:"0",linkType:"sysResources",fileSize:10240,isFlag:0},beforeUpload:function(e){return e&&e.size>10485760?(r.OpenNotification("error","\u9644\u4ef6\u4e0d\u80fd\u5927\u4e8e10M"),!1):e}},u.a.createElement(V.a,null,"\u70b9\u51fb\u4e0a\u4f20"))),u.a.createElement(L.a.Item,{label:"\u9644\u4ef6id",name:"resourceId",rules:[{required:!0}]},u.a.createElement(U.a,{disabled:!0})),u.a.createElement(L.a.Item,{label:"\u4e0b\u8f7dURL",name:"resourceDownload"},u.a.createElement(U.a,{disabled:!0})),u.a.createElement(L.a.Item,{label:"\u6c34\u5370URL",name:"dowloadHttpUrl"},u.a.createElement(U.a,{disabled:!0})),u.a.createElement(L.a.Item,{label:"\u5b58\u50a8\u8def\u5f84",name:"resourceStorage"},u.a.createElement(U.a,{disabled:!0})),u.a.createElement(L.a.Item,{label:"\u6587\u4ef6\u540e\u7f00",name:"suffix",rules:[{required:!0}]},u.a.createElement(U.a,{disabled:!0})),u.a.createElement(L.a.Item,{label:"\u6587\u4ef6\u5927\u5c0f",name:"size",rules:[{required:!0}]},u.a.createElement(U.a,{disabled:!0}))))})),B={labelCol:{span:4},wrapperCol:{span:19}},_=Object(d.b)((function(e){return{utils:e.app.utils}}))((function(e){var t=e.onCancel,a=e.visible,r=e.title,i=e.utils,l=e.onOk,s=e.detail,o=L.a.useForm(),d=Object(q.a)(o,1)[0],p=Object(c.useState)(),m=Object(q.a)(p,2),f=(m[0],m[1]);return u.a.createElement(K.a,{title:r,visible:a,onCancel:t,onOk:function(){return d.submit()}},u.a.createElement(L.a,Object.assign({form:d},B,{onFinish:function(e){console.log(e);var t=j.a.omit(e,"filearr");l(t)},initialValues:Object(n.a)({},s)}),u.a.createElement(L.a.Item,{label:"\u8d44\u6e90\u540d\u79f0",name:"annexName",rules:[{required:!0}]},u.a.createElement(U.a,null)),u.a.createElement(L.a.Item,{label:"\u8d44\u6e90KEY",name:"resourceKey",rules:[{required:!0}]},u.a.createElement(U.a,null)),u.a.createElement(L.a.Item,{label:"\u4e0a\u4f20\u9644\u4ef6",name:"filearr",valuePropName:"fileList",getValueFromEvent:function(e){if(console.log("Upload event:",e),Array.isArray(e))return e;if("done"==e.file.status){var t=e.file.response,a=t.code,n=t.data,r=t.msg;if(1!=a)return i.OpenNotification("error",r),null;f(n),d.setFieldsValue({resourceId:n.id,resourceDownload:n.dowloadHttpUrl,dowloadHttpUrl:n.dowloadHttpPdfUrl,resourceStorage:n.flieUrl,suffix:n.suffixName,size:n.fileSize}),e.fileList=[e.file]}return e.file&&e.fileList}},u.a.createElement(D.a,{action:"/zlwj/api/resource/file/uploadFile",name:"file",data:{token:i.getToken(),resourceType:"0",linkType:"sysResources",fileSize:10240,isFlag:0},beforeUpload:function(e){return e&&e.size>10485760?(i.OpenNotification("error","\u9644\u4ef6\u4e0d\u80fd\u5927\u4e8e10M"),!1):e}},u.a.createElement(V.a,null,"\u70b9\u51fb\u4e0a\u4f20"))),u.a.createElement(L.a.Item,{label:"\u9644\u4ef6id",name:"resourceId",rules:[{required:!0}]},u.a.createElement(U.a,{disabled:!0})),u.a.createElement(L.a.Item,{label:"\u4e0b\u8f7dURL",name:"resourceDownload"},u.a.createElement(U.a,{disabled:!0})),u.a.createElement(L.a.Item,{label:"\u6c34\u5370URL",name:"dowloadHttpUrl"},u.a.createElement(U.a,{disabled:!0})),u.a.createElement(L.a.Item,{label:"\u5b58\u50a8\u8def\u5f84",name:"resourceStorage"},u.a.createElement(U.a,{disabled:!0})),u.a.createElement(L.a.Item,{label:"\u6587\u4ef6\u540e\u7f00",name:"suffix",rules:[{required:!0}]},u.a.createElement(U.a,{disabled:!0})),u.a.createElement(L.a.Item,{label:"\u6587\u4ef6\u5927\u5c0f",name:"size",rules:[{required:!0}]},u.a.createElement(U.a,{disabled:!0}))))})),J={current:1,annexName:"",resourceKey:""},M={current:1,annexName:"",resourceKey:""},Y=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={addVisible:!1,editVisible:!1,detail:{id:""}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.getSysResource({params:J})}},{key:"getCol",value:function(){var e=this;return[].concat(Object(r.a)(z),[{title:"\u64cd\u4f5c",render:function(t){return u.a.createElement(u.a.Fragment,null,u.a.createElement(V.a,{type:"link",onClick:function(){return e.setState({editVisible:!0,detail:t})}},"\u8d44\u6e90\u8be6\u60c5"),u.a.createElement(R.a,{title:"\u662f\u5426\u5220\u9664\uff1f",onConfirm:e.deleteSubmit.bind(e,t)},u.a.createElement(V.a,{type:"link"},"\u5220\u9664")))}}])}},{key:"submitSearch",value:function(e){e&&(J=Object(n.a)(Object(n.a)({},J),e)),this.props.actions.getSysResource({params:J,refresh:!0})}},{key:"deleteSubmit",value:function(e){var t=this;this.props.actions.deleteSysResource({id:e.id},(function(){t.props.utils.OpenNotification("success"),t.props.actions.getSysResource({params:J,refresh:!0})}))}},{key:"addSubmit",value:function(e){var t=this;this.props.actions.addSysResource(e,(function(){t.props.utils.OpenNotification("success"),t.props.actions.getSysResource({params:J,refresh:!0}),t.setState({addVisible:!1})}))}},{key:"editSubmit",value:function(e){var t=this;this.props.actions.editSysResource(Object(n.a)(Object(n.a)({},e),{},{id:this.state.detail.id}),(function(){t.props.utils.OpenNotification("success"),t.props.actions.getSysResource({params:J,refresh:!0}),t.setState({editVisible:!1})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.spinning,n=t.utils,r=t.resource,i=this.state,l=i.addVisible,s=i.editVisible,o=i.detail;return u.a.createElement(m.a,{spinning:a},u.a.createElement("div",{key:"a"},u.a.createElement(F.a,{before:u.a.createElement(V.a,{type:"primary",onClick:function(){return e.setState({addVisible:!0})}},"\u65b0\u589e"),initialValues:J,resetValues:M,handleSearch:this.submitSearch.bind(this),data:[{label:"\u8d44\u6e90\u540d\u79f0",name:"annexName",type:U.a},{label:"\u8d44\u6e90key",name:"resourceKey",type:U.a}]})),u.a.createElement("div",{key:"b"},u.a.createElement(P.a,{size:"small"},u.a.createElement(T.a,{size:"small",columns:this.getCol(),dataSource:r?n.addIndex(r.list):[],pagination:n.Pagination(r,(function(t){J.current=t,e.props.actions.getSysResource({params:J})}))}))),u.a.createElement(A,{title:"\u65b0\u589e\u8d44\u6e90",visible:l,onCancel:function(){return e.setState({addVisible:!1})},onOk:this.addSubmit.bind(this)}),u.a.createElement(_,{title:"\u7f16\u8f91\u8d44\u6e90",visible:s,detail:o,onCancel:function(){return e.setState({editVisible:!1})},onOk:this.editSubmit.bind(this)}))}}]),a}(u.a.Component);t.default=Object(d.b)((function(e){return{resource:e.other.resource,utils:e.app.utils,spinning:e.other.spinning}}),(function(e){return{actions:Object(p.b)({getSysResource:I,addSysResource:C,editSysResource:w,deleteSysResource:S},e)}}))(Y)}}]);
//# sourceMappingURL=11.e06c2da4.chunk.js.map