(this.webpackJsonpzlwj_sass_r=this.webpackJsonpzlwj_sass_r||[]).push([[9],{1211:function(e,t,a){"use strict";var n=a(4),i=a.n(n),c=a(14),l=a.n(c),r=a(0),s=a(5),o=a.n(s),u=a(279),m=a.n(u),d=a(12),p=a(170),f=a(84),b=a(213),h=a(90),g=a(118),y=a(95),v=a(42),k=void 0,E=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a},C=r.forwardRef((function(e,t){var a=r.useState(e.visible),n=l()(a,2),c=n[0],s=n[1];r.useEffect((function(){"visible"in e&&s(e.visible)}),[e.visible]),r.useEffect((function(){"defaultVisible"in e&&s(e.defaultVisible)}),[e.defaultVisible]);var u=function(t,a){"visible"in e||s(t),e.onVisibleChange&&e.onVisibleChange(t,a)},m=function(t){u(!1,t),e.onConfirm&&e.onConfirm.call(k,t)},C=function(t){u(!1,t),e.onCancel&&e.onCancel.call(k,t)},S=r.useContext(y.b).getPrefixCls,O=e.prefixCls,P=e.placement,N=e.children,x=e.overlayClassName,j=E(e,["prefixCls","placement","children","overlayClassName"]),V=S("popover",O),w=S("popconfirm",O),D=o()(w,x),z=r.createElement(h.a,{componentName:"Popconfirm",defaultLocale:g.a.Popconfirm},(function(t){return function(t,a){var n,c=e.okButtonProps,l=e.cancelButtonProps,s=e.title,o=e.cancelText,u=e.okText,d=e.okType,p=e.icon;return r.createElement("div",{className:"".concat(t,"-inner-content")},r.createElement("div",{className:"".concat(t,"-message")},p,r.createElement("div",{className:"".concat(t,"-message-title")},(n=s)?"function"===typeof n?n():n:null)),r.createElement("div",{className:"".concat(t,"-buttons")},r.createElement(f.a,i()({onClick:C,size:"small"},l),o||a.cancelText),r.createElement(f.a,i()({onClick:m},Object(b.a)(d),{size:"small"},c),u||a.okText)))}(V,t)}));return r.createElement(p.a,i()({},j,{prefixCls:V,placement:P,onVisibleChange:function(t){e.disabled||u(t)},visible:c,overlay:z,overlayClassName:D,ref:t}),Object(v.a)(N,{onKeyDown:function(e){var t,a;r.isValidElement(N)&&(null===(a=null===N||void 0===N?void 0:(t=N.props).onKeyDown)||void 0===a||a.call(t,e)),function(e){e.keyCode===d.a.ESC&&c&&u(!1,e)}(e)}}))}));C.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:r.createElement(m.a,null),disabled:!1};t.a=C},1224:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n=a(38),i=a.n(n),c=a(4),l=a.n(c),r=a(6),s=a.n(r),o=a(14),u=a.n(o),m=a(45),d=a.n(m),p=a(0),f=a(5),b=a.n(f),h=a(388),g=a(318),y=a(181),v=a(95),k=a(442),E=a(434),C=a(276),S=a(42),O=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a},P=function(e){var t=e.prefixCls,a=e.children,n=e.actions,i=e.extra,c=e.className,r=e.colStyle,o=O(e,["prefixCls","children","actions","extra","className","colStyle"]),u=p.useContext(j),m=u.grid,d=u.itemLayout,f=p.useContext(v.b).getPrefixCls,h=f("list",t),g=n&&n.length>0&&p.createElement("ul",{className:"".concat(h,"-item-action"),key:"actions"},n.map((function(e,t){return p.createElement("li",{key:"".concat(h,"-item-action-").concat(t)},e,t!==n.length-1&&p.createElement("em",{className:"".concat(h,"-item-action-split")}))}))),y=m?"div":"li",k=p.createElement(y,l()({},o,{className:b()("".concat(h,"-item"),s()({},"".concat(h,"-item-no-flex"),!("vertical"===d?i:!function(){var e;return p.Children.forEach(a,(function(t){"string"===typeof t&&(e=!0)})),e&&p.Children.count(a)>1}())),c)}),"vertical"===d&&i?[p.createElement("div",{className:"".concat(h,"-item-main"),key:"content"},a,g),p.createElement("div",{className:"".concat(h,"-item-extra"),key:"extra"},i)]:[a,g,Object(S.a)(i,{key:"extra"})]);return m?p.createElement(C.a,{flex:1,style:r},k):k};P.Meta=function(e){var t=e.prefixCls,a=e.className,n=e.avatar,i=e.title,c=e.description,r=O(e,["prefixCls","className","avatar","title","description"]),s=(0,p.useContext(v.b).getPrefixCls)("list",t),o=b()("".concat(s,"-item-meta"),a),u=p.createElement("div",{className:"".concat(s,"-item-meta-content")},i&&p.createElement("h4",{className:"".concat(s,"-item-meta-title")},i),c&&p.createElement("div",{className:"".concat(s,"-item-meta-description")},c));return p.createElement("div",l()({},r,{className:o}),n&&p.createElement("div",{className:"".concat(s,"-item-meta-avatar")},n),(i||c)&&u)};var N=P,x=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a},j=p.createContext({});j.Consumer;function V(e){var t,a=e.pagination,n=void 0!==a&&a,c=e.prefixCls,r=e.bordered,o=void 0!==r&&r,m=e.split,f=void 0===m||m,C=e.className,S=e.children,O=e.itemLayout,P=e.loadMore,N=e.grid,V=e.dataSource,w=void 0===V?[]:V,D=e.size,z=e.header,M=e.footer,I=e.loading,T=void 0!==I&&I,L=e.rowKey,K=e.renderItem,A=e.locale,R=x(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),U=n&&"object"===d()(n)?n:{},_=p.useState(U.defaultCurrent||1),B=u()(_,2),H=B[0],J=B[1],Y=p.useState(U.defaultPageSize||10),F=u()(Y,2),W=F[0],q=F[1],G=p.useContext(v.b),Q=G.getPrefixCls,X=G.renderEmpty,Z=G.direction,$={},ee=function(e){return function(t,a){J(t),q(a),n&&n[e]&&n[e](t,a)}},te=ee("onChange"),ae=ee("onShowSizeChange"),ne=Q("list",c),ie=T;"boolean"===typeof ie&&(ie={spinning:ie});var ce=ie&&ie.spinning,le="";switch(D){case"large":le="lg";break;case"small":le="sm"}var re=b()(ne,(t={},s()(t,"".concat(ne,"-vertical"),"vertical"===O),s()(t,"".concat(ne,"-").concat(le),le),s()(t,"".concat(ne,"-split"),f),s()(t,"".concat(ne,"-bordered"),o),s()(t,"".concat(ne,"-loading"),ce),s()(t,"".concat(ne,"-grid"),N),s()(t,"".concat(ne,"-something-after-last-item"),!!(P||n||M)),s()(t,"".concat(ne,"-rtl"),"rtl"===Z),t),C),se=l()(l()(l()({},{current:1,total:0}),{total:w.length,current:H,pageSize:W}),n||{}),oe=Math.ceil(se.total/se.pageSize);se.current>oe&&(se.current=oe);var ue=n?p.createElement("div",{className:"".concat(ne,"-pagination")},p.createElement(k.a,l()({},se,{onChange:te,onShowSizeChange:ae}))):null,me=i()(w);n&&w.length>(se.current-1)*se.pageSize&&(me=i()(w).splice((se.current-1)*se.pageSize,se.pageSize));var de=Object(g.a)(),pe=p.useMemo((function(){for(var e=0;e<y.b.length;e+=1){var t=y.b[e];if(de[t])return t}}),[de]),fe=p.useMemo((function(){if(N){var e=pe&&N[pe]?N[pe]:N.column;return e?{width:"".concat(100/e,"%"),maxWidth:"".concat(100/e,"%")}:void 0}}),[null===N||void 0===N?void 0:N.column,pe]),be=ce&&p.createElement("div",{style:{minHeight:53}});if(me.length>0){var he=me.map((function(e,t){return function(e,t){return K?((a="function"===typeof L?L(e):"string"===typeof L?e[L]:e.key)||(a="list-item-".concat(t)),$[t]=a,K(e,t)):null;var a}(e,t)})),ge=p.Children.map(he,(function(e,t){return p.createElement("div",{key:$[t],style:fe},e)}));be=N?p.createElement(E.a,{gutter:N.gutter},ge):p.createElement("ul",{className:"".concat(ne,"-items")},he)}else S||ce||(be=function(e,t){return p.createElement("div",{className:"".concat(e,"-empty-text")},A&&A.emptyText||t("List"))}(ne,X));var ye=se.position||"bottom";return p.createElement(j.Provider,{value:{grid:N,itemLayout:O}},p.createElement("div",l()({className:re},R),("top"===ye||"both"===ye)&&ue,z&&p.createElement("div",{className:"".concat(ne,"-header")},z),p.createElement(h.a,ie,be,S),M&&p.createElement("div",{className:"".concat(ne,"-footer")},M),P||("bottom"===ye||"both"===ye)&&ue))}V.Item=N;t.b=V},1232:function(e,t,a){"use strict";a.r(t);var n=a(81),i=a(68),c=a(69),l=a(77),r=a(76),s=a(0),o=a.n(s),u=a(66),m=a(80),d=a(212),p=a(122),f=a(211),b=a(210),h=a(123),g=a(1190),y=a(84),v=a(1224),k=a(1204),E=a(1201),C=a(281),S=a(189),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},P=a(128),N=function(e,t){return s.createElement(P.a,Object.assign({},e,{ref:t,icon:O}))};N.displayName="EditOutlined";var x=s.forwardRef(N),j=a(1206),V=a(1211),w=function(e){var t=e.children,a=e.onConfirm,n=e.onCancel;return o.a.createElement(V.a,{title:"\u662f\u5426\u5220\u9664\uff1f",onConfirm:a,onCancel:n||function(){}},t)},D=a(1205),z=a(62),M=a.n(z),I=a(1191),T=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={addVisible:!1,menus:"",addDetial:"",editVisible:!1,editDetial:""},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.initial()}},{key:"handleData",value:function(e){return function e(t){M.a.each(t,(function(t,a){t.title=t.menuName,t.key=t.id,t.children=t.childMenu,t.childMenu&&t.childMenu.length&&e(t.childMenu)}))}(e),e}},{key:"initial",value:function(){var e=this;this.props.actions.getSelectChildTree({params:{systemId:this.props.match.params.id},next:function(t){e.setState({menus:t})},refresh:!0})}},{key:"addSubmit",value:function(e){var t=this;this.props.actions.addSelectChildTree(Object(n.a)(Object(n.a)({},e),{},{parentId:this.state.addDetial?this.state.addDetial.id:"",systemId:this.props.match.params.id}),(function(){t.props.utils.OpenNotification("success"),t.setState({addVisible:!1}),t.initial()}))}},{key:"editSubmit",value:function(e){var t=this;this.props.actions.editSelectChildTree(Object(n.a)(Object(n.a)({},e),{},{id:this.state.editDetial.id}),(function(){t.props.utils.OpenNotification("success"),t.setState({editVisible:!1}),t.initial()}))}},{key:"deleteSubmit",value:function(e){var t=this;this.props.actions.deleteSelectChildTree({id:e.id},(function(){t.props.utils.OpenNotification("success"),t.initial()}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.spinning,n=(t.utils,this.state),i=n.addVisible,c=n.menus,l=(n.addDetial,n.editVisible),r=n.editDetial;return o.a.createElement(o.a.Fragment,null,o.a.createElement(g.a,{size:"small",title:"\u6743\u9650\u83dc\u5355",extra:o.a.createElement(y.a,{type:"primary",onClick:function(){return e.setState({addVisible:!0})}},"\u65b0\u589e")},c?o.a.createElement(k.a,{defaultExpandAll:!0,blockNode:!0,treeData:this.handleData(c),titleRender:function(t){return o.a.createElement("div",{className:"flexbetween"},o.a.createElement("span",null,t.title,"(",t.menuKey,")"),o.a.createElement(D.b,{size:20},o.a.createElement(I.a,{onClick:function(){return e.setState({addVisible:!0,addDetial:t})}}),o.a.createElement(x,{onClick:function(){return e.setState({editVisible:!0,editDetial:t})}}),o.a.createElement(V.a,{title:"\u662f\u5426\u5220\u9664\uff1f",onConfirm:e.deleteSubmit.bind(e,t)},o.a.createElement(j.a,null))))}}):o.a.createElement(E.a,{active:!0})),o.a.createElement(S.a,{title:"\u65b0\u589e\u83dc\u5355",spinning:a,visible:i,onCancel:function(){return e.setState({addVisible:!1,addDetial:""})},onOk:this.addSubmit.bind(this),data:[{label:"\u6743\u9650\u540d\u79f0",name:"menuName",type:f.a,rules:!0},{label:"\u6743\u9650key",name:"menuKey",type:f.a,rules:!0},{label:"\u6743\u9650URL",name:"menuUrl",type:f.a},{label:"\u5907\u6ce8",name:"remark",type:f.a}]}),o.a.createElement(S.a,{title:"\u7f16\u8f91\u83dc\u5355",spinning:a,visible:l,onCancel:function(){return e.setState({editVisible:!1,editDetial:""})},onOk:this.editSubmit.bind(this),initialValues:r,data:[{label:"\u6743\u9650\u540d\u79f0",name:"menuName",type:f.a,rules:!0},{label:"\u6743\u9650key",name:"menuKey",type:f.a,rules:!0},{label:"\u6743\u9650URL",name:"menuUrl",type:f.a},{label:"\u5907\u6ce8",name:"remark",type:f.a}]}))}}]),a}(o.a.Component),L=Object(u.b)((function(e){return{utils:e.app.utils,spinning:e.user.spinning}}),(function(e){return{actions:Object(m.b)({getSelectChildTree:C.j,addSelectChildTree:C.a,editSelectChildTree:C.f,deleteSelectChildTree:C.d},e)}}))(T),K=p.a.Option,A=f.a.TextArea,R=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={packages:[],addPackageVisible:!1,editPackageVisible:!1,packageDetail:{},currentPackage:{},currentChecked:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.getSystemPackage({systemId:this.props.match.params.id},(function(t){e.setState({packages:t})}))}},{key:"addPackageVisible",value:function(e){var t=this;this.props.actions.addSystemPackage(Object(n.a)(Object(n.a)({},e),{},{systemId:this.props.match.params.id}),(function(){t.props.utils.OpenNotification("success"),t.setState({addPackageVisible:!1}),t.props.actions.getSystemPackage({systemId:t.props.match.params.id},(function(e){t.setState({packages:e})}))}))}},{key:"editPackageVisible",value:function(e){var t=this;this.props.actions.editSystemPackage(Object(n.a)(Object(n.a)({},e),{},{id:this.state.packageDetail.id}),(function(){t.props.utils.OpenNotification("success"),t.setState({editPackageVisible:!1}),t.props.actions.getSystemPackage({systemId:t.props.match.params.id},(function(e){t.setState({packages:e})}))}))}},{key:"deleteSubmit",value:function(e,t){var a=this;t.stopPropagation(),this.props.actions.deleteSystemPackage({id:e.id},(function(){a.props.utils.OpenNotification("success"),a.props.actions.getSystemPackage({systemId:a.props.match.params.id},(function(e){a.setState({packages:e})}))}))}},{key:"handleData",value:function(e){return function e(t){M.a.each(t,(function(t,a){t.title=t.menuName,t.key=t.id,t.children=t.childMenu,t.childMenu&&t.childMenu.length&&e(t.childMenu)}))}(e),e}},{key:"render",value:function(){var e=this,t=this.props,a=t.spinning,n=t.menutree,i=t.match,c=this.state,l=c.packages,r=c.addPackageVisible,s=c.editPackageVisible,u=c.packageDetail,m=c.currentPackage,C=c.currentChecked;return o.a.createElement(d.a,{spinning:a},o.a.createElement(b.a,{gutter:10,key:"a"},o.a.createElement(h.a,{span:8},o.a.createElement(L,this.props)),o.a.createElement(h.a,{span:8},o.a.createElement(g.a,{size:"small",title:"\u65b0\u589e\u6743\u9650\u5305",extra:o.a.createElement(y.a,{type:"primary",onClick:function(){return e.setState({addPackageVisible:!0})}},"\u65b0\u589e\u6743\u9650\u5305")},o.a.createElement(v.b,{dataSource:l,bordered:!0,renderItem:function(t){return o.a.createElement(v.b.Item,{style:{cursor:"pointer",padding:8},onClick:function(){e.setState({currentPackage:t}),e.props.actions.findPackageMenu({packageId:t.id},(function(t){e.setState({currentChecked:t})}))},actions:[o.a.createElement(x,{onClick:function(a){a.stopPropagation(),e.setState({editPackageVisible:!0,packageDetail:t})}}),o.a.createElement(w,{onConfirm:e.deleteSubmit.bind(e,t),onCancel:function(e){return e.stopPropagation()}},o.a.createElement(j.a,{onClick:function(e){return e.stopPropagation()}}))]},t.packageName)}}))),o.a.createElement(h.a,{span:8},o.a.createElement(g.a,{size:"small",title:m.packageName,extra:o.a.createElement(y.a,{disabled:!m.packageName,type:"primary",onClick:function(){e.props.actions.savePackageMenu({packageId:m.id,menus:C.join(),systemId:i.params.id})}},"\u4fdd\u5b58")},n?o.a.createElement(k.a,{defaultExpandAll:!0,checkStrictly:!0,checkedKeys:C,checkable:!0,blockNode:!0,treeData:this.handleData(n),onCheck:function(t){var a=t.checked;e.setState({currentChecked:a})}}):o.a.createElement(E.a,{active:!0})))),o.a.createElement(S.a,{title:"\u65b0\u589e\u6743\u9650\u5305",spinning:a,visible:r,onCancel:function(){return e.setState({addPackageVisible:!1})},onOk:this.addPackageVisible.bind(this),data:[{label:"\u6743\u9650\u5305\u540d\u79f0",name:"packageName",type:f.a},{label:"\u9ed8\u8ba4",name:"isDefault",type:o.a.createElement(p.a,null,o.a.createElement(K,{value:"Y"},"\u662f"),o.a.createElement(K,{value:"N"},"\u5426"))},{label:"\u5907\u6ce8",name:"remark",type:A}]}),o.a.createElement(S.a,{title:"\u7f16\u8f91\u6743\u9650\u5305",spinning:a,visible:s,onCancel:function(){return e.setState({editPackageVisible:!1})},onOk:this.editPackageVisible.bind(this),initialValues:u,data:[{label:"\u6743\u9650\u5305\u540d\u79f0",name:"packageName",type:f.a},{label:"\u9ed8\u8ba4",name:"isDefault",type:o.a.createElement(p.a,null,o.a.createElement(K,{value:"Y"},"\u662f"),o.a.createElement(K,{value:"N"},"\u5426"))},{label:"\u5907\u6ce8",name:"remark",type:A}]}))}}]),a}(o.a.Component);t.default=Object(u.b)((function(e){return{menutree:e.system.menutree,utils:e.app.utils,spinning:e.system.spinning}}),(function(e){return{actions:Object(m.b)({getSystemPackage:C.k,addSystemPackage:C.c,editSystemPackage:C.h,deleteSystemPackage:C.e,findPackageMenu:C.i,savePackageMenu:C.m},e)}}))(R)}}]);
//# sourceMappingURL=9.4c0ea100.chunk.js.map