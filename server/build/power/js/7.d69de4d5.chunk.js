(this.webpackJsonpzlwj_sass_r=this.webpackJsonpzlwj_sass_r||[]).push([[7],{911:function(e,t,n){"use strict";var a=n(1),i=n.n(a),l=n(14),s=n.n(l),o=n(0),r=n(4),c=n.n(r),u=n(206),p=n.n(u),m=n(29),f=n(182),d=n(284),b=n(286),y=n(127),C=n(122),v=n(77),g=n(17),E=void 0,O=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n},h=o.forwardRef((function(e,t){var n=o.useState(e.visible),a=s()(n,2),l=a[0],r=a[1];o.useEffect((function(){"visible"in e&&r(e.visible)}),[e.visible]),o.useEffect((function(){"defaultVisible"in e&&r(e.defaultVisible)}),[e.defaultVisible]);var u=function(t,n){"visible"in e||r(t),e.onVisibleChange&&e.onVisibleChange(t,n)},p=function(t){u(!1,t),e.onConfirm&&e.onConfirm.call(E,t)},h=function(t){u(!1,t),e.onCancel&&e.onCancel.call(E,t)},k=o.useContext(v.b).getPrefixCls,j=e.prefixCls,N=e.placement,V=e.children,W=e.overlayClassName,w=O(e,["prefixCls","placement","children","overlayClassName"]),x=k("popover",j),L=k("popconfirm",j),S=c()(L,W),P=o.createElement(y.a,{componentName:"Popconfirm",defaultLocale:C.a.Popconfirm},(function(t){return function(t,n){var a,l=e.okButtonProps,s=e.cancelButtonProps,r=e.title,c=e.cancelText,u=e.okText,m=e.okType,f=e.icon;return o.createElement("div",{className:"".concat(t,"-inner-content")},o.createElement("div",{className:"".concat(t,"-message")},f,o.createElement("div",{className:"".concat(t,"-message-title")},(a=r)?"function"===typeof a?a():a:null)),o.createElement("div",{className:"".concat(t,"-buttons")},o.createElement(d.a,i()({onClick:h,size:"small"},s),c||n.cancelText),o.createElement(d.a,i()({onClick:p},Object(b.a)(m),{size:"small"},l),u||n.okText)))}(x,t)}));return o.createElement(f.a,i()({},w,{prefixCls:x,placement:N,onVisibleChange:function(t){e.disabled||u(t)},visible:l,overlay:P,overlayClassName:S,ref:t}),Object(g.a)(V,{onKeyDown:function(e){var t,n;o.isValidElement(V)&&(null===(n=null===V||void 0===V?void 0:(t=V.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===m.a.ESC&&l&&u(!1,e)}(e)}}))}));h.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:o.createElement(p.a,null),disabled:!1};t.a=h},913:function(e,t,n){"use strict";n.r(t);var a=n(225),i=n(860),l=n(84),s=n(85),o=n(90),r=n(89),c=n(0),u=n.n(c),p=n(126),m=n(93),f=n(285),d=n(851),b=n(868),y=n(284),C=n(911),v=n(838),g=n(915),E=n(849),O=n(844),h=n(846),k=n(859),j=b.a.Option,N={current:1,meterName:"",status:"",companyHe:[]},V={current:1,meterName:"",status:"",companyHe:[]},W=function(e){Object(o.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={addVisible:!1,editVisible:!1,detail:{id:"",companyId:"",itemId:""}},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.actions.getWattConfList(N)}},{key:"getCol",value:function(){var e=this;return[].concat(Object(i.a)(E.d),[{title:"\u72b6\u6001",dataIndex:"status",render:function(t,n){return u.a.createElement(b.a,{size:"small",value:t,onChange:function(t){e.props.actions.statusWattConf({id:n.id},(function(t){e.props.actions.getWattConfList(N,{obj:t,type:"edit"}),e.props.utils.OpenNotification("success")}))}},u.a.createElement(j,{value:1},"\u542f\u7528"),u.a.createElement(j,{value:0},"\u7981\u7528"))}},{title:"\u64cd\u4f5c",width:150,render:function(t){return u.a.createElement(u.a.Fragment,null,u.a.createElement(y.a,{type:"link",onClick:function(){return e.setState({editVisible:!0,detail:t})}},"\u7f16\u8f91"),u.a.createElement(C.a,{title:"\u662f\u5426\u5220\u9664\uff1f",onConfirm:function(){e.props.actions.deleteWattConf({id:t.id},(function(){e.props.utils.OpenNotification("success"),e.props.actions.getWattConfList(N,{refresh:!0})}))}},u.a.createElement(y.a,{type:"link"},"\u5220\u9664")))}}])}},{key:"render",value:function(){var e=this,t=this.props,n=t.spinning,i=t.utils,l=t.wattconf,s=this.state,o=s.addVisible,r=s.editVisible,c=s.detail;return u.a.createElement(f.a,{spinning:n},u.a.createElement("div",{key:"a"},u.a.createElement(O.a,{before:u.a.createElement(y.a,{type:"primary",onClick:function(){return e.setState({addVisible:!0})}},"\u65b0\u589e"),initialValues:N,resetValues:V,submitSearch:function(t){N=t?Object(a.a)(Object(a.a)({},N),t):V,e.props.actions.getWattConfList(N)},data:[{label:"\u7535\u8868\u540d\u79f0",name:"meterName",type:"input"},{label:"\u516c\u53f8\u9879\u76ee",name:"companyHe",type:u.a.createElement(h.a,null)},{label:"\u72b6\u6001",name:"status",type:"select",selectList:[{label:"\u5168\u90e8",id:""},{label:"\u542f\u7528",id:1},{label:"\u7981\u7528",id:0}]}]})),u.a.createElement("div",{key:"b"},u.a.createElement(v.a,{size:"small"},u.a.createElement(g.a,{size:"small",columns:this.getCol(),dataSource:l?i.addIndex(l.list):[],pagination:i.Pagination(l,(function(t){N.current=t,e.props.actions.getWattConfList(N)}))}))),u.a.createElement(k.a,{title:"\u65b0\u589e\u7535\u8868",spinning:n,visible:o,onCancel:function(){return e.setState({addVisible:!1})},onOk:function(t){e.props.actions.addWattConf(t,(function(){e.props.utils.OpenNotification("success"),e.setState({addVisible:!1}),e.props.actions.getWattConfList(N,{refresh:!0})}))},data:[{label:"\u516c\u53f8\u9879\u76ee",name:"companyHe",type:u.a.createElement(h.a,null),rules:!0},{label:"\u7535\u8868\u540d\u79f0",name:"meterName",type:"input",rules:!0},{label:"\u521d\u59cb\u7535\u8868\u503c",name:"initDegrees",type:"inputNumber",rules:!0},{label:"\u7535\u4ef7",name:"unitMoney",type:"inputNumber",rules:!0},{label:"\u72b6\u6001",name:"status",type:"select",selectList:[{label:"\u542f\u7528",id:1},{label:"\u7981\u7528",id:0}],rules:!0},{label:"\u5907\u6ce8",name:"remark",type:"textarea"}]}),u.a.createElement(k.a,{title:"\u7f16\u8f91\u7535\u8868",spinning:n,visible:r,onCancel:function(){return e.setState({editVisible:!1})},initialValues:Object(a.a)(Object(a.a)({},c),{},{companyHe:[c.companyId||"",c.itemId||""]}),onOk:function(t){e.props.actions.editWattConf(Object(a.a)(Object(a.a)({},t),{},{id:c.id}),(function(){e.props.utils.OpenNotification("success"),e.setState({editVisible:!1}),e.props.actions.getWattConfList(N,{refresh:!0})}))},data:[{label:"\u516c\u53f8\u9879\u76ee",name:"companyHe",type:u.a.createElement(h.a,null),rules:!0},{label:"\u7535\u8868\u540d\u79f0",name:"meterName",type:"input",rules:!0},{label:"\u521d\u59cb\u7535\u8868\u503c",name:"initDegrees",type:"inputNumber",rules:!0},{label:"\u7535\u4ef7",name:"unitMoney",type:"inputNumber",rules:!0},{label:"\u72b6\u6001",name:"status",type:"select",selectList:[{label:"\u542f\u7528",id:1},{label:"\u7981\u7528",id:0}],rules:!0},{label:"\u5907\u6ce8",name:"remark",type:"textarea"}]}))}}]),n}(u.a.Component);t.default=Object(p.b)((function(e){return{wattconf:e.project.wattconf,utils:e.app.utils,spinning:e.project.spinning}}),(function(e){return{actions:Object(m.b)({getWattConfList:d.k,statusWattConf:d.n,addWattConf:d.b,editWattConf:d.g,deleteWattConf:d.e},e)}}))(W)}}]);
//# sourceMappingURL=7.d69de4d5.chunk.js.map